"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{1576:function(e,t,n){n.d(t,{Z:function(){return l}});var a=n(5893),r=n(2445),o=n(1485);let i=(0,o.k)((e,t)=>{let{shadow:n,borderRadius:a}=t;return{cardContainer:{boxShadow:"0px 3px ".concat(n,"px rgba(0, 0, 0, 0.2)"),borderRadius:a,margin:"0"}}});var l=function(e){let{children:t,shadow:n=10,borderRadius:o=15,className:l,...s}=e,{classes:c,cx:d}=i({shadow:n,borderRadius:o});return(0,a.jsx)(r.W,{className:d(c.cardContainer,l),...s,children:t})}},7832:function(e,t,n){n.d(t,{Z:function(){return w}});var a=n(5893),r=n(3259),o=n(9834),i=n(1232),l=n(7564),s=n(5117),c=n(4980),d=n(1995),h=n(7339),u=n(904),m=n(7283),p=n(1485);let x=(0,p.k)(e=>({photoButton:{color:"black",borderRadius:"0.25rem 0 0 0.25rem",border:"1px solid ".concat(e.colors.gray[4]),borderRight:"none","&:hover":{backgroundColor:e.colors.gray[0]},"&:active":{transform:"none !important"}}}));var g=n(8701),j=n(2167),b=n(8233),k=n(7294),f=n(6154);async function v(e){let t=new FormData;t.append("image",e);let{data:n}=await f.Z.post("".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/upload/image"),t,{headers:{"Content-Type":"multipart/form-data"}});return n}var C=n(1759),y=n(753),w=function(e){let{editor:t}=e,{classes:n}=x(),[p,f]=(0,k.useState)(!1),[w,{toggle:Z,close:S}]=(0,C.q)(),N=(0,y.O)(()=>S());return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.L.ControlsGroup,{children:[(0,a.jsx)(c.L.Bold,{}),(0,a.jsx)(c.L.Italic,{}),(0,a.jsx)(c.L.Underline,{}),(0,a.jsx)(c.L.Strikethrough,{}),(0,a.jsx)(c.L.Code,{}),(0,a.jsx)(c.L.CodeBlock,{icon:()=>(0,a.jsx)(d.Z,{size:16,stroke:2})})]}),(0,a.jsxs)(c.L.ControlsGroup,{children:[(0,a.jsx)(c.L.Hr,{}),(0,a.jsx)(c.L.Subscript,{}),(0,a.jsx)(c.L.Superscript,{})]}),(0,a.jsxs)(c.L.ControlsGroup,{ref:N,children:[(0,a.jsxs)(r.J,{width:600,position:"bottom",withArrow:!0,shadow:"md",opened:w,children:[(0,a.jsx)(r.J.Target,{children:(0,a.jsx)(o.A,{variant:"outline",className:n.photoButton,size:26,onClick:Z,children:(0,a.jsx)(h.Z,{size:16,stroke:1})})}),(0,a.jsx)(r.J.Dropdown,{children:(0,a.jsx)(g.fh,{onDrop:async e=>{f(!0);let n=e.map(e=>v(e).catch(t=>((0,b.x2)("".concat(e.name," 업로드중 문제가 발생했습니다."),"잠시 후 다시 시도해주세요."),Promise.resolve(null)))),a=await Promise.all(n),r=a.filter(e=>null!==e).map(e=>{let{data:{url:t}}=e;return t});f(!1);let{state:o}=t.view,{tr:i}=o,l=o.selection.to;r.reverse().forEach((e,t)=>{console.log(e);let n=o.schema.nodes.image.create({src:e});i.insert(l+t,n)}),null==t||t.view.dispatch(i),null==t||t.view.focus(),S()},onReject:()=>{(0,b.x2)("이미지 형식이 올바르지 않습니다.","5MB, 10개 이하의 올바른 이미지 파일을 첨부해주세요.")},maxSize:5242880,accept:j.d1,loading:p,maxFiles:10,children:(0,a.jsxs)(i.Z,{position:"center",spacing:"xl",children:[(0,a.jsx)(g.fh.Accept,{children:(0,a.jsx)(u.Z,{size:"3.2rem",stroke:1.5})}),(0,a.jsx)(g.fh.Reject,{children:(0,a.jsx)(m.Z,{size:"3.2rem",stroke:1.5})}),(0,a.jsx)(g.fh.Idle,{children:(0,a.jsx)(h.Z,{size:"3.2rem",stroke:1.5})}),(0,a.jsxs)(l.K,{spacing:5,align:"center",children:[(0,a.jsx)(s.x,{size:"xl",inline:!0,children:"클릭하거나 파일을 드래그하여 업로드"}),(0,a.jsx)(s.x,{size:"sm",color:"dimmed",inline:!0,mt:7,children:"파일을 여러 개 첨부할 수 있습니다 (최대 10개). 각 파일의 크기는 5MB를 초과할 수 없습니다."})]})]})})})]}),(0,a.jsx)(c.L.Link,{}),(0,a.jsx)(c.L.Unlink,{})]})]})}},5816:function(e,t,n){var a=n(5893),r=n(263),o=n(1232),i=n(9985),l=n(7564),s=n(5117);t.Z=function(e){let{user:t}=e,n=(0,r.rZ)();return(0,a.jsxs)(o.Z,{spacing:14,children:[(0,a.jsx)(i.q,{src:"https://avatars.githubusercontent.com/u/52057157?v=4",radius:"xl",size:46}),(0,a.jsxs)(l.K,{spacing:5,children:[(0,a.jsx)(s.x,{size:"md",children:t.name}),(0,a.jsx)(s.x,{size:"xs",color:n.colors.gray[5],children:t.description})]})]})}},3440:function(e,t,n){var a=n(5893),r=n(1232),o=n(5117),i=n(4906),l=n(5816);t.Z=function(e){let{user:t,date:n}=e;return(0,a.jsxs)(r.Z,{position:"apart",align:"flex-start",children:[(0,a.jsx)(l.Z,{user:t}),(0,a.jsx)(o.x,{size:"xs",color:"gray",children:(0,i.n)(n)})]})}},6461:function(e,t,n){n.d(t,{tC:function(){return q},ZP:function(){return H},z2:function(){return A}});var a=n(5893),r=n(5117),o=n(4736),i=n(7564),l=n(1232),s=n(9236),c=n(2445),d=n(4397),h=n(3951),u=n(2870),m=n(6554),p=n(3440),x=n(1485);let g=(0,x.k)((e,t)=>{let{maxContentHeight:n}=t;return{postContainer:{width:616,padding:25},contentWrapper:{position:"relative",overflow:"hidden",maxHeight:n,borderBottom:"none",width:"100%",padding:0,"&::after":{content:'""',position:"absolute",bottom:0,left:0,width:"100%",height:"2em",background:"linear-gradient(to bottom, rgba(252, 252, 254, 0), rgba(252, 252, 254, 1) 100%)"}},content:{lineHeight:1.5,maxHeight:n,overflow:"hidden",borderBottom:"none",paddingBottom:"1.5rem","*":{marginBottom:"0px !important"}},thumbnail:{background:e.colors.gray[8],borderRadius:15,maxWidth:"100%",overflow:"hidden"},multiSelect:{".mantine-MultiSelect-values":{backgroundColor:"transparent"},".mantine-MultiSelect-input":{padding:0,border:"none",backgroundColor:"transparent"}},modal:{".mantine-Modal-body":{padding:0},".mantine-Modal-header":{display:"none"},"	.mantine-Modal-content":{borderRadius:15}},imageModal:{".mantine-Modal-content":{backgroundColor:"transparent",boxShadow:"none"}},heartFilled:{marginLeft:"0.1rem",marginRight:"0.1rem"}}});var j=n(1759),b=n(3946),k=n(753),f=n(1576),v=n(7294),C=n(4472),y=n(1411),w=n(8528),Z=n(3523),S=n(1209),N=n(3865);let z=(0,x.k)(e=>({carousel:{".mantine-Carousel-control":{backgroundColor:"transparent",border:"none",boxShadow:"none"},".mantine-Carousel-indicator":{width:"1.5rem",transition:"width 250ms ease","&[data-active]":{width:"2.5rem",backgroundColor:"white"}}},carouselSlide:{padding:"0px 50px 35px"}}));function I(e){let{imageSrc:t}=e,{classes:n,cx:r}=z(),o=t.map(e=>({src:e})),[i]=(0,w.n)(o),[l,s]=(0,v.useState)(null);(0,C.D)(l,200);let c=i.map(e=>(0,a.jsx)(y.l.Slide,{size:"49.375rem",children:(0,a.jsx)(Z.M,{className:n.carouselSlide,onClick:e=>{e.stopPropagation()},children:(0,a.jsx)(u.E,{width:"43.125rem",height:"28.125rem",fit:"contain",src:e.src})})}));return(0,a.jsx)(y.l,{className:n.carousel,getEmblaApi:s,withIndicators:!0,loop:!0,align:"center",previousControlIcon:(0,a.jsx)(S.Z,{color:"white",size:"2.5rem"}),nextControlIcon:(0,a.jsx)(N.Z,{color:"white",size:"2.5rem"}),children:c})}var B=n(9929),T=n(1163),M=n(7466),L=n(6350),F=n(9075),P=n(8823),K=n(7447),R=n(434),W=n(653),D=n(8290),O=n(5938),E=n(8233);let q=(0,v.createContext)({canCloseModal:()=>{}});function A(e){var t,n,o,i,l;return(null===(t=e.parent)||void 0===t?void 0:t.title)!==null?(0,a.jsx)(r.x,{color:"#228be6",children:null===(l=e.parent)||void 0===l?void 0:l.title}):(null===(n=e.parent)||void 0===n?void 0:n.content)===null||(null===(o=e.parent)||void 0===o?void 0:o.content)===void 0?(0,a.jsx)(r.x,{color:"#ced4da",children:"(삭제된 게시물 입니다.)"}):(0,a.jsx)(r.x,{color:"#228be6",children:function(e){let t=e.replace(/<.*?>/g,""),n=t.slice(0,20);return t.length>20&&(n+="..."),n}(null===(i=e.parent)||void 0===i?void 0:i.content)})}var H=function(e){let{post:t,thumbnailUrl:n}=e,{classes:x}=g({maxContentHeight:n?50:150}),[C,y]=(0,j.q)(!1),w=(0,T.useRouter)(),{user:Z,token:N,openSignInModal:z}=(0,P.Z)(),[H,G]=(0,b.v)({modalClickOutside:!0}),U=(0,B.bu)(t.content),$=(0,B.ab)(t.content);(0,k.O)(()=>{!1===H.modalClickOutside&&(0,E.x2)("수정 중에는 게시글을 떠날 수 없습니다.",null)});let _=[];for(let e=0;e<M.aq;e++){let t=M.$m[e];t.forEach(e=>{_.push(e.label)})}let V=t.like,X=t.parent?"child":"post";console.log("postType",X,t);let{mutatePost:J}=(0,v.useContext)(F.CommunityContext);return(0,a.jsx)(q.Provider,{value:{canCloseModal:()=>{(0,b.v)(e=>({modalClickOutside:!e.modalClickOutside}))}},children:(0,a.jsx)(o.k,{onClick:()=>{w.push("/community/".concat(t.id))},children:(0,a.jsx)(f.Z,{className:x.postContainer,children:(0,a.jsxs)(i.K,{spacing:14,children:["child"===X&&(0,a.jsx)(O.Z,{center:!1,onClick:e=>{var n;e.stopPropagation(),w.push("/community/".concat(null===(n=t.parent)||void 0===n?void 0:n.id))},children:(0,a.jsxs)(l.Z,{spacing:0,children:[(0,a.jsx)(S.Z,{color:"#228be6"}),A(t)]})}),(0,a.jsx)(p.Z,{user:t.author,date:t.createdAt}),(0,a.jsxs)(i.K,{spacing:7,children:[(0,a.jsx)(s.D,{order:3,children:t.title}),(0,a.jsx)(c.W,{className:x.contentWrapper,children:(0,a.jsx)(d.l,{children:(0,a.jsx)("div",{className:x.content,dangerouslySetInnerHTML:{__html:$}})})}),n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.u,{opened:C,onClose:y.close,onClick:e=>{e.stopPropagation()},size:"49.375rem",padding:0,centered:!0,className:x.imageModal,withCloseButton:!1,children:(0,a.jsx)(I,{imageSrc:U})}),(0,a.jsx)(u.E,{onClick:e=>{e.stopPropagation(),y.open()},src:n,alt:"thumbnail",width:"100%",height:300,fit:"contain",className:x.thumbnail})]}),(0,a.jsx)(m.NU,{className:x.multiSelect,data:_,value:t.categories.map(e=>e.name),readOnly:!0}),(0,a.jsxs)(l.Z,{spacing:13,children:[(0,a.jsxs)(l.Z,{spacing:8,children:[(0,a.jsx)(K.Z,{size:20,stroke:1.3}),(0,a.jsx)(r.x,{fz:"sm",children:t.childCount})]}),(0,a.jsxs)(l.Z,{spacing:8,children:[(0,a.jsxs)(O.Z,{onClick:e=>{if(e.stopPropagation(),!Z){z();return}(0,L.y)({data:{boardId:t.id,token:N}},V).then(()=>{J()}).catch(e=>{})},children:[V&&(0,a.jsx)(u.E,{className:x.heartFilled,width:"1rem",height:"0.9rem",src:"/images/HeartFilled.svg"}),!V&&(0,a.jsx)(R.Z,{size:20,stroke:1.3})]}),(0,a.jsx)(r.x,{fz:"sm",children:t.likeCount})]}),(0,a.jsx)(O.Z,{onClick:e=>{e.stopPropagation()},children:(0,a.jsx)(W.Z,{size:20,stroke:1.3})}),(0,a.jsx)(O.Z,{onClick:e=>{e.stopPropagation()},children:(0,a.jsx)(D.Z,{size:20,stroke:1.3})})]})]})]})})})})}},4588:function(e,t,n){n.d(t,{w:function(){return c}});var a=n(5893),r=n(7294),o=n(7841),i=n(3941),l=n(1485);let s=(0,l.k)(e=>({button:{position:"relative",transition:"background-color 150ms ease",width:120},progress:{...e.fn.cover(-1),height:"auto",backgroundColor:"transparent",zIndex:0},label:{position:"relative",zIndex:1,fontWeight:"normal"}}));function c(e){let{CloseModal:t,text:n,...l}=e,{classes:c,theme:d}=s(),[h,u]=(0,r.useState)(0),[m,p]=(0,r.useState)(!1);return(0,a.jsxs)(o.z,{className:c.button,color:m?"teal":d.primaryColor,...l,children:[(0,a.jsx)("div",{className:c.label,children:n}),0!==h&&(0,a.jsx)(i.E,{value:h,color:d.fn.rgba(d.colors[d.primaryColor][2],.35),radius:"sm"})]})}},9918:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(5893),r=n(6554),o=n(1485);let i=(0,o.k)(e=>({multiSelect:{".mantine-MultiSelect-label":{marginBottom:3}}}));var l=n(7466);let s=[];for(let e=0;e<l.aq;e++){let t=l.$m[e];t.map(t=>{s.push({value:t.label,label:t.label,group:l.WD[e]})})}var c=function(e){let{...t}=e,{classes:n}=i();return(0,a.jsx)(r.NU,{data:s,label:"카테고리",placeholder:"하나 이상의 카테고리를 선택해주세요.",className:n.multiSelect,...t})}},3777:function(e,t,n){n.d(t,{Z:function(){return f}});var a=n(5893),r=n(7310),o=n(4980),i=n(1284),l=n(601),s=n(4991),c=n(8510),d=n(1705),h=n(8151),u=n(7832),m=n(1485);let p=(0,m.k)(e=>({editor:{minHeight:300}}));var x=n(6761),g=n(7294),j=n(2608),b=n(1083);let k=(0,g.forwardRef)((e,t)=>{let{content:n}=e,m=(0,i.jE)({extensions:[s.Z,c.Z,r.r,d.Z,h.Z,l.ZP,j.Z.configure({lowlight:b.$}),x.ZP],content:n}),{classes:k}=p();return(0,g.useImperativeHandle)(t,()=>({getHTML:()=>null==m?void 0:m.getHTML()})),(0,a.jsxs)(o.L,{editor:m,className:k.editor,children:[(0,a.jsx)(o.L.Toolbar,{sticky:!0,children:(0,a.jsx)(u.Z,{editor:m})}),(0,a.jsx)(o.L.Content,{})]})});var f=k},9827:function(e,t,n){n.d(t,{K:function(){return j}});var a=n(5893),r=n(2445),o=n(7564),i=n(3523),l=n(1485);let s=(0,l.k)(e=>({SideBarContainer:{width:"16.375rem",height:"100vh",position:"fixed",backgroundColor:"#F9FEFF",float:"right",padding:"0",boxShadow:"-4px 4px 4px 0px rgba(0, 0, 0, 0.50)"},SideBarName:{float:"left",width:"5rem",height:"1.4375rem",backgroundColor:"#9AE3EB",borderRadius:"0.3rem",marginTop:"1rem"},SideBarN:{marginTop:"0.2rem"},Search:{width:"12.59619rem",height:"2rem",".mantine-TextInput-wrapper":{borderRadius:" 15px",border:"1px solid #757575",backgroundColor:"#F3F3F3"},".mantine-TextInput-input":{border:"none",backgroundColor:"transparent"}},Grouping:{marginBottom:"14rem",paddingLeft:"1rem"}}));var c=n(5117),d=n(61),h=n(9153),u=n(7283),m=n(5938),p=n(7248),x=n(8233),g=n(1163);function j(e){let{onSearchSubmit:t}=e,{classes:n,cx:l}=s(),j=(0,p.c)({initialValues:{searchKeyword:""}}),b=(0,g.useRouter)();return(0,a.jsxs)(r.W,{className:n.SideBarContainer,children:[(0,a.jsxs)(o.K,{className:n.Grouping,spacing:"1rem",children:[(0,a.jsx)(i.M,{className:n.SideBarName,children:(0,a.jsx)(c.x,{color:"white",children:"검색"})}),(0,a.jsx)("form",{onSubmit:j.onSubmit(e=>{""===e.searchKeyword.trim()?(0,x.x2)("검색어를 입력해주세요.","검색 창에 아무 내용도 입력하지 않으셨습니다."):(null==t||t(e.searchKeyword),b.push("/community?search=".concat(e.searchKeyword)))}),children:(0,a.jsx)(d.o,{...j.getInputProps("searchKeyword"),onSubmit:e=>{alert(e.currentTarget.value)},icon:(0,a.jsx)(h.Z,{size:"1rem"}),rightSection:(0,a.jsx)(m.Z,{children:(0,a.jsx)(u.Z,{onClick:e=>j.setFieldValue("searchKeyword","")})}),placeholder:"검색 부탁드립니다!",className:n.Search})})]}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(r.W,{className:n.Grouping,children:(0,a.jsx)(i.M,{className:n.SideBarName,children:(0,a.jsx)(c.x,{color:"white",children:"테마"})})}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)(r.W,{className:n.Grouping})]})}},7466:function(e,t,n){n.d(t,{$m:function(){return m},WD:function(){return r},XF:function(){return j},aq:function(){return g}});var a=n(9058);let r=["개발","디자인","공모전","음악","퍼블리싱","인터페이스","창업","입문"],o=[{label:"자료",checked:!0,key:(0,a.k)()},{label:"정보",checked:!0,key:(0,a.k)()},{label:"질문",checked:!0,key:(0,a.k)()},{label:"개발일지",checked:!0,key:(0,a.k)()},{label:"홍보",checked:!0,key:(0,a.k)()}],i=[{label:"캐릭터",checked:!0,key:(0,a.k)()},{label:"적",checked:!0,key:(0,a.k)()},{label:"배경",checked:!0,key:(0,a.k)()}],l=[{label:"Unity 공모전",checked:!0,key:(0,a.k)()},{label:"C# 공모전",checked:!0,key:(0,a.k)()},{label:"Python 공모전",checked:!0,key:(0,a.k)()}],s=[{label:"배경 음악",checked:!0,key:(0,a.k)()},{label:"효과음",checked:!0,key:(0,a.k)()}],c=[{label:"퍼블리싱",checked:!0,key:(0,a.k)()}],d=[{label:"게임 시작",checked:!0,key:(0,a.k)()},{label:"설정",checked:!0,key:(0,a.k)()}],h=[{label:"팀원 모집",checked:!0,key:(0,a.k)()},{label:"자금",checked:!0,key:(0,a.k)()}],u=[{label:"유니티 입문",checked:!0,key:(0,a.k)()},{label:"언리얼 입문",checked:!0,key:(0,a.k)()}],m=[o,i,l,s,c,d,h,u],p=r.length,x=m.length,g=p==x?p:p>x?x:p,j=["공지사항","업데이트","개발일지","리뷰","공략","뻘글"]},769:function(e,t,n){var a=n(4593),r=n(7334),o=n(7967),i=n(8823);let l=(e,t,n,a)=>{let{search:o,parentId:i,boardType:l}=a;if(t&&null===t.data.cursor.afterCursor)return null;let s={categoryNames:n.length>0?n.join(","):null};o&&(s.q=o),l&&(s.boardType=l),e>0&&(s.afterCursor=null==t?void 0:t.data.cursor.afterCursor);let c=(0,r.stringify)(s);return o?"".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/community/board/search?").concat(c):i?"".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/community/board/getChild/").concat(i,"?").concat(c):"".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/community/board?").concat(c)};t.Z=function(e){var t,n,r,s,c;let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:h}=(0,i.Z)(),u=(0,a.ZP)((t,n)=>l(t,n,e,d),e=>(0,o._)(e,h)),m=(null===(t=null===(n=u.data)||void 0===n?void 0:null===(r=n[u.data.length-1])||void 0===r?void 0:r.data.cursor)||void 0===t?void 0:t.afterCursor)===null,p=(null===(s=u.data)||void 0===s?void 0:null===(c=s[0])||void 0===c?void 0:c.data.data.length)===0;return{...u,isLast:m,isEmpty:p}}},9075:function(e,t,n){n.r(t),n.d(t,{CommunityContext:function(){return ed},default:function(){return eh}});var a=n(5893),r=n(1163),o=n(1485);let i=(0,o.k)(e=>({container:{display:"flex",width:"100%",gap:83,height:"100%"},leftMainContainer:{display:"flex",padding:20,flexGrow:1,gap:39},leftContainer:{margin:0,width:260},mainContainer:{width:616,margin:0},rightContainer:{width:260,margin:0}}));var l=function(e){let{children:t,leftSection:n,rightSection:r}=e,{classes:o}=i();return(0,a.jsxs)("div",{className:o.container,children:[(0,a.jsxs)("div",{className:o.leftMainContainer,children:[(0,a.jsx)("div",{className:o.leftContainer,children:n}),(0,a.jsx)("div",{className:o.mainContainer,children:t})]}),(0,a.jsx)("div",{className:o.rightContainer,children:r})]})},s=n(9985),c=n(3723),d=n(5272),h=n(7564),u=n(1232),m=n(61),p=n(3951),x=n(1759),g=n(4065);let j=(0,o.k)(e=>({container:{height:74,display:"flex",overflow:"hidden",alignItems:"center",padding:"14px 18px",gap:19},TextInput:{float:"left",flex:1},erase:{display:"none"},avatarInWriting:{border:"1px solid ".concat(e.colors.gray[2])},editorModal:{".mantine-Modal-body":{padding:0},".mantine-Modal-header":{display:"none"},"	.mantine-Modal-content":{borderRadius:15}},editorContainer:{width:800,padding:19}}));var b=n(1576),k=n(5816),f=n(3777),v=n(4588),C=n(9918),y=n(7248),w=n(7294),Z=n(1117),S=n(8233),N=n(8823),z=function(){let{classes:e}=j(),[t,{open:n,close:r}]=(0,x.q)(!1),o=(0,g.a)("(max-width: 50em)"),[i,l]=(0,w.useState)(""),[z,I]=(0,w.useState)(""),B=(0,y.c)({initialValues:{title:z,category:[]}}),T=(0,w.useRef)(null),{mutatePost:M}=(0,w.useContext)(ed),{token:L}=(0,N.Z)(),[F,P]=(0,w.useState)(!0),[K,R]=(0,w.useState)(!1),{user:W,openSignInModal:D}=(0,N.Z)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(b.Z,{className:e.container,children:[(0,a.jsx)(s.q,{className:e.avatarInWriting,radius:"xl",size:46,src:"https://avatars.githubusercontent.com/u/52057157?v=4"}),(0,a.jsx)(m.o,{placeholder:"새로운 글을 작성해보세요.",pos:"relative",onFocus:e=>{e.currentTarget.blur(),P(!0),W?n():D()},className:e.TextInput,value:B.values.title,readOnly:!0})]}),(0,a.jsx)(p.u,{opened:t,onClose:r,fullScreen:o,className:e.editorModal,size:"auto",scrollAreaComponent:c.x.Autosize,centered:!0,keepMounted:F,children:(0,a.jsx)("form",{onSubmit:B.onSubmit(e=>{let t=T.current.getHTML(),n={...e,content:t};!1===K||0===n.category.length?(0,S.c0)("카테고리 없음","카테고리를 1개 이상 추가해주세요."):"<p></p>"===n.content?(0,S.c0)("본문 없음","본문 내용을 추가해주세요."):""===n.title?(0,S.c0)("제목 없음","제목을 추가해주세요."):(0,Z.l)({title:n.title,content:n.content,categoryNames:n.category},L).then(()=>{B.setFieldValue("title",""),P(!1),r(),(0,S.c0)("업로드 완료","게시물이 성공적으로 게시되었습니다."),M(),R(!1)})}),children:(0,a.jsx)(d.i,{active:t,children:(0,a.jsxs)(h.K,{className:e.editorContainer,spacing:17,children:[W&&(0,a.jsx)(k.Z,{user:W}),(0,a.jsx)(m.o,{placeholder:"멋진 제목을 입력해주세요.","data-autofocus":!0,onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()},...B.getInputProps("title")}),(0,a.jsx)(f.Z,{content:i,ref:T}),(0,a.jsx)(C.Z,{onChange:e=>{B.setFieldValue("category",e),R(!0)}}),(0,a.jsx)(u.Z,{position:"right",children:(0,a.jsx)(v.w,{CloseModal:r,text:"글 작성",type:"submit"})})]})})})})]})},I=n(263),B=n(5117),T=n(6461),M=n(4736),L=n(3523);let F=(0,o.k)(e=>({container:{height:46},input:{height:"100%",flexGrow:1,".mantine-TextInput-wrapper":{height:"100%",width:"100%"},".mantine-TextInput-input":{height:"100%",borderRadius:"23px 0 0 23px",border:"1px solid ".concat(e.colors.gray[5]),borderRight:"none"}},searchButton:{backgroundColor:e.colors.gray[2],border:"1px solid ".concat(e.colors.gray[5]),borderRadius:"0 23px 23px 0",width:76,height:"100%"},searchIcon:{position:"relative",left:-3}}));var P=n(9153),K=function(e){let{className:t,onSubmit:n,defaultValue:o}=e,{classes:i,cx:l}=F(),[s,c]=(0,w.useState)(null!=o?o:""),d=(0,r.useRouter)(),h=d.query.search;return(0,w.useEffect)(()=>{var e;c(null!==(e=null==h?void 0:h.toString())&&void 0!==e?e:"")},[h]),(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),null==n||n(s)},children:(0,a.jsxs)(u.Z,{spacing:0,className:l(i.container,t),children:[(0,a.jsx)(m.o,{placeholder:"검색어를 입력해주세요.",className:i.input,value:s,onChange:e=>c(e.currentTarget.value)}),(0,a.jsx)(M.k,{variant:"transparent",className:i.searchButton,type:"submit",children:(0,a.jsx)(L.M,{children:(0,a.jsx)(P.Z,{className:i.searchIcon})})})]})})},R=n(1141),W=n(8002),D=n(7841),O=n(3833);let E=(0,o.k)(e=>({tabItem:{color:e.colors.gray[6],fontSize:20,width:115},tabItemActive:{color:"".concat(e.colors.blue[6]," !important")},tabList:{width:"100%"},settingButton:{color:e.colors.gray[6],backgroundColor:"white",fontSize:20,fontWeight:500,"&:hover":{backgroundColor:e.colors.gray[1]}},dropdown:{padding:"20px 17px"},settingItem:{".mantine-NativeSelect-label":{marginBottom:10},".mantine-NativeSelect-input":{color:e.colors.gray[6],width:100}}}));var q=n(7349),A=function(e){let{className:t,onChange:n}=e,{classes:r,cx:o}=E(),[i,l]=(0,w.useState)("post");return(0,a.jsx)(R.m,{value:i,onTabChange:e=>{l(e),null==n||n(e)},className:t,children:(0,a.jsx)(R.m.List,{children:(0,a.jsxs)(u.Z,{position:"apart",className:r.tabList,noWrap:!0,children:[(0,a.jsxs)(u.Z,{spacing:0,noWrap:!0,children:[(0,a.jsx)(R.m.Tab,{value:"post",className:o(r.tabItem,"post"===i&&r.tabItemActive),children:"게시글"}),(0,a.jsx)(R.m.Tab,{value:"comment",className:o(r.tabItem,"comment"===i&&r.tabItemActive),children:"댓글"})]}),(0,a.jsxs)(W.v,{closeOnItemClick:!1,position:"right-start",children:[(0,a.jsx)(W.v.Target,{children:(0,a.jsx)(D.z,{leftIcon:(0,a.jsx)(q.Z,{}),className:r.settingButton,children:"검색 설정"})}),(0,a.jsx)(W.v.Dropdown,{className:r.dropdown,children:(0,a.jsxs)(u.Z,{spacing:10,children:[(0,a.jsx)(O.p,{data:["최신순","조회순"],label:"정렬 순서",className:r.settingItem}),(0,a.jsx)(O.p,{data:["전체","최근 1일","최근 1주","최근 1개월","최근 1년"],label:"기간",className:r.settingItem})]})})]})]})})})},H=n(9827),G=n(769),U=n(8623),$=n(2445);let _=(0,o.k)(e=>({postContainer:{width:616,padding:25},content:{position:"relative",borderBottom:"none",width:"100%",padding:0}}));function V(){let{classes:e}=_();return(0,a.jsx)(b.Z,{className:e.postContainer,children:(0,a.jsxs)(h.K,{spacing:14,children:[(0,a.jsxs)(u.Z,{position:"apart",align:"flex-start",children:[(0,a.jsxs)(u.Z,{spacing:14,children:[(0,a.jsx)(U.O,{height:46,circle:!0}),(0,a.jsxs)(h.K,{spacing:5,children:[(0,a.jsx)(U.O,{height:16,width:100,radius:"sm"}),(0,a.jsx)(U.O,{height:12,width:150,radius:"sm"})]})]}),(0,a.jsx)(U.O,{height:12,width:30,radius:"sm"})]}),(0,a.jsx)($.W,{className:e.content,children:(0,a.jsxs)(h.K,{spacing:8,h:157,justify:"center",children:[(0,a.jsx)(U.O,{height:16,radius:"sm"}),(0,a.jsx)(U.O,{height:16,radius:"sm"}),(0,a.jsx)(U.O,{height:16,radius:"sm"}),(0,a.jsx)(U.O,{height:16,radius:"sm"}),(0,a.jsx)(U.O,{height:16,radius:"sm"}),(0,a.jsx)(U.O,{height:16,radius:"sm"})]})})]})})}var X=n(2128),J=n(7466),Q=n(9929),Y=n(3775),ee=n(7414),et=n(1003),en=n(8528),ea=n(3946),er=n(2508),eo=n(1500),ei=n(2257);let el=(0,o.k)(e=>({CategoryContainer:{boxSizing:"border-box",width:"16.313rem",position:"relative",float:"left",backgroundColor:"#FFF",boxShadow:"0px 3px 10px rgba(0, 0, 0, 0.2)",borderRadius:"15px"},CategoryText:{display:"block",position:"relative",paddingTop:"1.25rem",paddingBottom:"0.938rem",fontWeight:500,fontSize:20,color:"#000"},DropDownButton:{display:"inline-block",boxSizing:"border-box",height:"1.25rem",padding:"0px 5px"},CheckboxGroup:{display:"block",position:"relative",width:"100%"},CheckboxItems:{marginLeft:"0.65rem",padding:0,paddingLeft:"0.65rem"},PaddingBottom:{paddingBottom:"1.25rem"},marginTop:{marginTop:"0.5rem"},allCheckBox:{display:"block",position:"relative",paddingTop:"1.25rem",paddingBottom:"0.938rem",paddingRight:"0.5rem",".mantine-Checkbox-label":{color:e.colors.gray[3]}},allCheckBoxIcon:{width:"100%"}}));var es=n(5938);function ec(e){let{onCategoryChange:t}=e,{classes:n,cx:r}=el(),o=J.$m.reduce((e,t)=>[...e,...t.map(e=>e.label)],[]),[i,l]=(0,en.n)(o);(0,w.useEffect)(()=>{null==t||t(i)},[i]);let[s,c]=(0,ea.v)({checked:!1,isChanging:!1}),d=Array(J.aq),m=Array(J.aq);for(let e=0;e<J.aq;e++){let[t,r]=(0,en.n)(J.$m[e]),[o,{toggle:p}]=(0,x.q)(!1),g=t.every(e=>e.checked),j=t.some(e=>e.checked)&&!g;d[e]=g;let b=t.map((e,t)=>(0,a.jsx)(u.Z,{spacing:"xs",children:(0,a.jsx)(Y.X,{label:e.label,checked:e.checked,onChange:n=>{let a=n.currentTarget.checked;r.setItemProp(t,"checked",a),a?l.append(e.label):l.filter(t=>t!==e.label)}},e.key)})),k=()=>{r.setState(e=>e.map(e=>({...e,checked:!g}))),g?l.filter(e=>t.every(t=>t.label!==e)):l.append(...t.map(e=>e.label).filter(e=>!i.includes(e)))};m[e]=(0,a.jsxs)(ee.x,{className:n.CheckboxGroup,children:[(0,a.jsxs)(u.Z,{position:"apart",children:[(0,a.jsx)(Y.X,{display:"inline-block",checked:g,indeterminate:j,label:J.WD[e],transitionDuration:0,onChange:k}),(0,a.jsxs)(D.z,{onClick:p,variant:"white",className:n.DropDownButton,children:[o&&(0,a.jsx)(er.Z,{stroke:1.5,color:"#000"}),!o&&(0,a.jsx)(eo.Z,{stroke:1.5,color:"#000"})]})]}),(0,a.jsx)($.W,{className:n.CheckboxItems,children:(0,a.jsx)(et.U,{in:o,className:n.marginTop,children:(0,a.jsx)(h.K,{spacing:"sm",children:b})})})]}),s.isChanging&&(g!=s.checked&&k(),c({isChanging:!1}))}let p=d.every(e=>!0===e);!s.checked&&p?c({checked:!0}):!p&&s.checked&&c({checked:!1});let g=(0,a.jsx)(Y.X,{className:n.allCheckBox,icon:e=>{let{indeterminate:t,className:o}=e;return(0,a.jsx)(ei.Z,{size:15,stroke:3,className:r(o,n.allCheckBoxIcon)})},color:"cyan",checked:s.checked,onChange:()=>{c(e=>({checked:!e.checked})),c({isChanging:!0})}});return(0,a.jsxs)($.W,{className:n.CategoryContainer,children:[(0,a.jsxs)(u.Z,{position:"apart",children:[(0,a.jsx)(B.x,{className:n.CategoryText,children:"카테고리"}),(0,a.jsx)(es.Z,{children:g})]}),(0,a.jsx)(h.K,{align:"flex-start",spacing:"md",className:n.PaddingBottom,children:m})]})}let ed=(0,w.createContext)({mutatePost:()=>{}});var eh=function(){let e=(0,I.rZ)(),t=(0,r.useRouter)(),n=t.query.search,o=[];for(let e=0;e<J.aq;e++){let t=J.$m[e];t.map(e=>{o.push(e.label)})}let[i,s]=(0,w.useState)(o),[c,d]=(0,w.useState)("post"),{data:u,isLoading:m,setSize:p,mutate:x,isEmpty:g}=(0,G.Z)(i,{search:n?n.toString():void 0,boardType:"post"==c?"parent":"child"}),[{y:j},b]=(0,X.b)(),[k,f]=(0,w.useState)(0);return(0,w.useEffect)(()=>{j>=k&&(p(e=>e+1),f(e=>e+1e3),console.log("scroll"))},[j]),(0,a.jsx)(ed.Provider,{value:{mutatePost:x},children:(0,a.jsx)(l,{leftSection:(0,a.jsx)(h.K,{spacing:16,children:(0,a.jsx)(ec,{onCategoryChange:e=>{s(e)}})}),rightSection:(0,a.jsx)(H.K,{onSearchSubmit:e=>{console.log(e)}}),children:(0,a.jsxs)(h.K,{spacing:50,children:[n?(0,a.jsxs)(h.K,{spacing:20,children:[(0,a.jsx)(K,{defaultValue:n.toString(),onSubmit:e=>{t.push("?search=".concat(e))}}),(0,a.jsx)(A,{onChange:e=>{d(e)}}),g&&(0,a.jsxs)(B.x,{color:e.colors.gray[4],children:["'",n.toString(),"'로 검색된 결과가 없습니다."]})]}):(0,a.jsx)(z,{}),null==u?void 0:u.map(e=>e.data.data.map(e=>(0,a.jsx)(T.ZP,{post:e,thumbnailUrl:(0,Q.Z7)(e)},e.id))),m&&(0,a.jsx)(V,{})]})})})}},9929:function(e,t,n){function a(e){let t=new DOMParser,n=t.parseFromString(e,"text/html"),a=n.getElementsByTagName("img"),r=[];if(0==a.length)return[""];for(let e=0;e<a.length;e++){let t=a[e].getAttribute("src");if(t){let e=decodeURI(t);r.push(e)}}return r}function r(e){if(""!=a(e.content)[0])return a(e.content)[0]}function o(e){return e.replace(/<img\b[^>]*>/gi,"")}n.d(t,{Z7:function(){return r},ab:function(){return o},bu:function(){return a}})},6350:function(e,t,n){n.d(t,{y:function(){return r}});var a=n(6154);async function r(e,t){let{data:{boardId:n,token:r}}=e,o="".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/community/board/").concat(n,"/like"),i={"Content-Type":"application/json",Authorization:"".concat(r)};try{return(t?await a.Z.delete(o,{headers:i}):await a.Z.post(o,{},{headers:i})).data}catch(e){throw e}}},1117:function(e,t,n){n.d(t,{l:function(){return r}});var a=n(6154);async function r(e,t){let{data:n}=await a.Z.post("".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/community/board"),e,{headers:{"Content-Type":"application/json",Authorization:"".concat(t)}});return n}},4906:function(e,t,n){n.d(t,{n:function(){return a}});function a(e){let t=new Date,n=t.getTime()-new Date(e).getTime()-324e5,a=Math.floor(n/1e3),r=Math.floor(a/60),o=Math.floor(r/60),i=Math.floor(o/24),l=Math.floor(i/30);return a<5?"방금 전":a<60?"".concat(a,"초 전"):r<60?"".concat(r,"분 전"):o<24?"".concat(o,"시간 전"):i<30?"".concat(i,"일 전"):l<12?"".concat(l,"달 전"):"".concat(Math.floor(l/12),"년 전")}}}]);
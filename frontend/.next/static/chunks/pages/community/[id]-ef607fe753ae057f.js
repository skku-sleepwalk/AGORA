(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[810],{4403:function(e,t,n){"use strict";n.d(t,{b:function(){return E}});var o=n(7294),i=n(263),r=n(3051),a=n(1485),s=n(2566),l=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))h.call(t,n)&&p(e,n,t[n]);if(m)for(var n of m(t))u.call(t,n)&&p(e,n,t[n]);return e},x=(e,t)=>c(e,d(t)),j=(0,a.k)((e,{radius:t,color:n},{variant:o})=>({root:g(x(g({},e.fn.fontStyles()),{position:"relative",overflow:"hidden",paddingTop:e.spacing.sm,paddingBottom:e.spacing.sm,paddingLeft:e.spacing.md,paddingRight:e.spacing.sm,borderRadius:e.fn.radius(t),border:`${(0,s.h)(1)} solid transparent`}),function({variant:e,color:t,theme:n}){if("filled"===e){let e=n.fn.variant({variant:"filled",color:t});return{backgroundColor:e.background,color:n.white}}if("outline"===e){let e=n.fn.variant({variant:"outline",color:t});return{color:e.color,borderColor:e.border,backgroundColor:"dark"===n.colorScheme?n.colors.dark[6]:n.white}}if("light"===e){let e=n.fn.variant({variant:"light",color:t});return{backgroundColor:e.background,color:e.color}}return null}({variant:o,color:n,theme:e})),wrapper:{display:"flex"},body:{flex:1},title:{boxSizing:"border-box",margin:0,marginBottom:e.spacing.xs,display:"flex",alignItems:"center",justifyContent:"space-between",lineHeight:e.lineHeight,fontSize:e.fontSizes.sm,fontWeight:700,"&[data-with-close-button]":{paddingRight:e.spacing.md}},label:{display:"block",overflow:"hidden",textOverflow:"ellipsis"},icon:{lineHeight:1,width:(0,s.h)(20),height:(0,s.h)(20),display:"flex",alignItems:"center",justifyContent:"flex-start",marginRight:e.spacing.md,marginTop:1},message:x(g({},e.fn.fontStyles()),{lineHeight:e.lineHeight,textOverflow:"ellipsis",overflow:"hidden",fontSize:e.fontSizes.sm,color:"filled"===o?e.white:"dark"===e.colorScheme?"light"===o?e.white:e.colors.dark[0]:e.black}),closeButton:{width:(0,s.h)(10),height:(0,s.h)(10)}})),v=n(7414),f=n(971),y=Object.defineProperty,b=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,k=(e,t,n)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,N=(e,t)=>{for(var n in t||(t={}))C.call(t,n)&&k(e,n,t[n]);if(b)for(var n of b(t))Z.call(t,n)&&k(e,n,t[n]);return e},w=(e,t)=>{var n={};for(var o in e)C.call(e,o)&&0>t.indexOf(o)&&(n[o]=e[o]);if(null!=e&&b)for(var o of b(e))0>t.indexOf(o)&&Z.call(e,o)&&(n[o]=e[o]);return n};let z={variant:"light"},E=(0,o.forwardRef)((e,t)=>{let n=(0,i.N4)("Alert",z,e),{id:a,className:s,title:l,variant:c,children:d,color:m,classNames:h,icon:u,styles:p,onClose:g,radius:x,withCloseButton:y,closeButtonLabel:b,unstyled:C}=n,Z=w(n,["id","className","title","variant","children","color","classNames","icon","styles","onClose","radius","withCloseButton","closeButtonLabel","unstyled"]),{classes:k,cx:E}=j({color:m,radius:x},{classNames:h,styles:p,unstyled:C,variant:c,name:"Alert"}),B=(0,r.M)(a),S=l&&`${B}-title`,I=`${B}-body`;return o.createElement(v.x,N({id:B,role:"alert","aria-labelledby":S,"aria-describedby":I,className:E(k.root,k[c],s),ref:t},Z),o.createElement("div",{className:k.wrapper},u&&o.createElement("div",{className:k.icon},u),o.createElement("div",{className:k.body},l&&o.createElement("div",{className:k.title,"data-with-close-button":y||void 0},o.createElement("span",{id:S,className:k.label},l)),o.createElement("div",{id:I,className:k.message},d)),y&&o.createElement(f.P,{className:k.closeButton,onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":b})))});E.displayName="@mantine/core/Alert"},3600:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var o=(0,n(853).Z)("alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]])},9801:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var o=(0,n(853).Z)("bell","IconBell",[["path",{d:"M10 5a2 2 0 1 1 4 0a7 7 0 0 1 4 6v3a4 4 0 0 0 2 3h-16a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6",key:"svg-0"}],["path",{d:"M9 17v1a3 3 0 0 0 6 0v-1",key:"svg-1"}]])},2158:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var o=(0,n(853).Z)("dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]])},471:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var o=(0,n(853).Z)("pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]])},4075:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var o=(0,n(853).Z)("trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]])},8689:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/community/[id]",function(){return n(5284)}])},5284:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return e_}});var o=n(5893),i=n(1163),r=n(5591),a=n(8823),s=n(7967),l=function(e){let{token:t}=(0,a.Z)(),n=(0,r.ZP)(e?"".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/community/board/").concat(e):null,e=>(0,s._)(e,t));return n},c=n(263),d=n(7564),m=n(1232),h=n(9236),u=n(4397),p=n(5117),g=n(61),x=n(4403),j=n(7841),v=n(6554),f=n(1485);let y=(0,f.k)(e=>({postContainer:{width:800,padding:41},content:{lineHeight:1.5,padding:0,"*":{marginBottom:"0px !important"}},editorContainer:{width:718,padding:"19px 0px 0px 0px"},editButton:{".mantine-Button-label":{fontWeight:"normal"}},cancelButton:{border:"1px solid ".concat(e.colors.gray[6])},multiSelect:{marginTop:10,".mantine-MultiSelect-values":{backgroundColor:"transparent"},".mantine-MultiSelect-input":{padding:0,border:"none",backgroundColor:"transparent"}}}));var b=n(3440),C=n(1576),Z=n(1003),k=n(3523),N=n(966),w=n(1284);let z=(0,f.k)(e=>({editorWrapper:{paddingBottom:12,marginBottom:8,borderBottom:"2px solid ".concat(e.colors.gray[3])},commentEditor:{".mantine-RichTextEditor-content":{fontSize:e.fontSizes.sm},".mantine-RichTextEditor-toolbar":{borderBottom:"none",borderTop:"1px solid ".concat(e.colors.gray[4])}},submitButton:{height:25,fontSize:e.fontSizes.xs,backgroundColor:e.colors.teal[5],"&:hover":{backgroundColor:e.colors.teal[6]}},EditButton:{height:25,fontSize:e.fontSizes.xs,".mantine-Button-label":{fontWeight:"normal"}},toolbarGroup:{width:"100%"},cancelAlert:{margin:"0.625rem 1rem"},cancelButton:{height:25,border:"1px solid ".concat(e.colors.gray[6]),fontSize:e.fontSizes.xs,".mantine-Button-label":{fontWeight:"normal"}}}));var E=n(4991),B=n(9404),S=n(8510),I=n(1705),M=n(8151),O=n(601),L=n(4980),P=n(2608),T=n(3237),R=n(1083),D=n(7414),H=n(6761),K=n(9985),_=n(2445);let A=(0,f.k)((e,t)=>{let{withoutLeftBorder:n}=t;return{commentFrame:{position:"relative"},avatar:{position:"absolute",top:1,left:6},commentWrapper:{marginLeft:23,paddingLeft:14,paddingTop:9,marginTop:0,marginRight:0,paddingRight:0,borderLeft:n?"none":"2px solid ".concat(e.colors.gray[3]),width:"100%"},commentContainer:{margin:0,paddingLeft:n?10:8},date:{paddingBottom:"0.3rem"},userName:{marginBottom:6}}});var F=n(4906),W=function(e){let{children:t,user:n,date:i,withoutLeftBorder:r=!1}=e,{classes:a}=A({withoutLeftBorder:r});return(0,o.jsxs)(m.Z,{spacing:7,className:a.commentFrame,children:[n?(0,o.jsx)(K.q,{src:"https://avatars.githubusercontent.com/u/52057157?v=4",radius:"xl",size:35,className:a.avatar}):(0,o.jsx)(K.q,{radius:"xl",size:35,className:a.avatar}),(0,o.jsx)(_.W,{className:a.commentWrapper,children:(0,o.jsxs)(d.K,{spacing:0,className:a.commentContainer,children:[(0,o.jsxs)(m.Z,{spacing:"xs",children:[(0,o.jsx)(h.D,{order:6,className:a.userName,children:null==n?void 0:n.name}),n&&null!==i&&(0,o.jsx)(p.x,{size:"xs",color:"gray",className:a.date,children:(0,F.n)(i)})]}),t]})})]})},q=n(7832),$=n(6154);async function G(e){let{boardId:t,data:n,token:o}=e,i="".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/community/board/").concat(t);try{let e=await $.Z.patch(i,n,{headers:{"Content-Type":"application/json",Authorization:"".concat(o)}});return e.data}catch(e){throw e}}var U=n(8233),V=n(3600),X=n(3946),J=n(7294),Q=function(e){let{user:t,placeholder:n,onSubmit:i}=e,{classes:r}=z(),a=(0,w.jE)({extensions:[E.Z,S.Z,B.Z,I.Z,M.Z,O.ZP,P.Z.configure({lowlight:R.$}),T.Z.configure({placeholder:n}),H.ZP]});return(0,o.jsx)(W,{user:t,date:null,withoutLeftBorder:!0,children:(0,o.jsx)(D.x,{className:r.editorWrapper,children:(0,o.jsxs)(L.L,{editor:a,className:r.commentEditor,children:[(0,o.jsx)(L.L.Content,{}),(0,o.jsx)(L.L.Toolbar,{children:(0,o.jsxs)(m.Z,{position:"apart",className:r.toolbarGroup,children:[(0,o.jsx)(m.Z,{children:(0,o.jsx)(q.Z,{editor:a})}),(0,o.jsx)(j.z,{className:r.EditButton,onClick:()=>{null==i||i(a.getHTML()).then(()=>{a.commands.setContent("")})},children:"작성"})]})})]})})})};function Y(e){let{onCancelClick:t,onEditClick:n,commentId:i,content:r,categoryNames:s}=e,l=(0,w.jE)({extensions:[E.Z,S.Z,B.Z,I.Z,M.Z,O.ZP,P.Z.configure({lowlight:R.$}),H.ZP],content:r}),{classes:c}=z(),{token:h,user:u}=(0,a.Z)(),[p,g]=(0,X.v)({cancel:!1}),{mutatePostDetail:v}=(0,J.useContext)(eT);return(0,o.jsx)(D.x,{children:(0,o.jsxs)(L.L,{editor:l,className:c.commentEditor,children:[(0,o.jsx)(L.L.Content,{}),(0,o.jsx)(L.L.Toolbar,{children:(0,o.jsxs)(m.Z,{position:"apart",className:c.toolbarGroup,children:[(0,o.jsx)(m.Z,{children:(0,o.jsx)(q.Z,{editor:l})}),!p.cancel&&(0,o.jsxs)(m.Z,{spacing:"xs",children:[(0,o.jsx)(j.z,{className:c.EditButton,variant:"light",color:"gray",onClick:()=>{g({cancel:!0})},children:"취소"}),(0,o.jsx)(j.z,{className:c.EditButton,onClick:()=>{"<p></p>"===l.getHTML()?(0,U.c0)("댓글 없음","댓글 내용을 입력해 주세요."):G({boardId:i,data:{title:void 0,content:l.getHTML(),categoryNames:s},token:h}).then(()=>{(0,U.c0)("업로드 완료","게시물이 성공적으로 수정되었습니다."),void 0!==n&&n(),v()})},children:"수정"})]})]})}),p.cancel&&(0,o.jsx)(x.b,{className:c.cancelAlert,icon:(0,o.jsx)(V.Z,{size:"1rem"}),title:"수정을 취소하시겠습니까?",color:"red",withCloseButton:!0,onClose:()=>{g({cancel:!1})},children:(0,o.jsxs)(d.K,{spacing:"xs",children:["수정을 취소하면 현재 수정된 내용을 모두 잃습니다.",(0,o.jsx)(m.Z,{position:"right",children:(0,o.jsx)(j.z,{variant:"light",color:"gray",className:c.cancelButton,onClick:t,children:"취소"})})]})})]})})}var ee=n(2870),et=n(8002),en=n(4736),eo=n(4777),ei=n(5938),er=n(434),ea=n(7447),es=(0,n(853).Z)("dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]),el=n(9801),ec=n(471),ed=n(4075),em=n(2508),eh=n(1500);let eu=(0,f.k)(e=>({comment:{paddingBottom:4},deleteButton:{border:"1px solid ".concat(e.colors.red[6])},heartFilled:{marginLeft:"0.1rem",marginRight:"0.1rem"},divider:{marginBottom:4},noComment:{margin:"10px 0"},moreButton:{height:30,textDecoration:"underline"},content:{lineHeight:1.5,"*":{marginBottom:"0px !important"}},dotButton:{height:22,borderRadius:5,"&:hover":{backgroundColor:e.colors.gray[1]}},menuItem:{padding:5}}));var ep=n(1759),eg=n(769),ex=n(6350);async function ej(e,t){try{let n=await $.Z.delete("".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/community/board/").concat(e),{headers:{"Content-Type":"application/json",Authorization:t}});console.log(n.data)}catch(t){console.error("post ID is"),console.error(e),console.error(t)}}var ev=n(6461),ef=function e(t){var n,i;let{post:r,mutateReply:s,onSubmitComment:l}=t,h=(0,c.rZ)(),{classes:g}=eu(),{token:v,user:f,openSignInModal:y}=(0,a.Z)(),[b,{toggle:C}]=(0,ep.q)(!1),[w,{toggle:z}]=(0,ep.q)(!1),{data:E,setSize:B,size:S,isEmpty:I,mutate:M,isLast:O,isLoading:L}=(0,eg.Z)(r.categories.map(e=>e.name),{parentId:r.id}),P=r.like,T=null===(n=r.author)||void 0===n?void 0:n.id;(null===(i=r.author)||void 0===i?void 0:i.id)===null&&(T="");let[R,D]=(0,X.v)({Edit:!1,canEdit:!!f&&T===f.id}),[H,K]=(0,X.v)({delete:!1}),{mutatePostDetail:_}=(0,J.useContext)(eT),{mutateComment:A}=(0,J.useContext)(eb),{canCloseModal:F}=(0,J.useContext)(ev.tC);return(0,o.jsxs)(W,{user:r.author,date:r.createdAt,withoutLeftBorder:!w,children:[(0,o.jsxs)(d.K,{spacing:0,children:[(0,o.jsxs)(d.K,{spacing:10,className:g.comment,children:[!R.Edit&&(null!==r.content?(0,o.jsx)(u.l,{children:(0,o.jsx)("div",{className:g.content,dangerouslySetInnerHTML:{__html:r.content}})}):(0,o.jsx)(p.x,{color:h.colors.gray[4],children:"(삭제된 댓글입니다.)"})),R.Edit&&(0,o.jsx)(Y,{onCancelClick:()=>{D({Edit:!1}),F()},onEditClick:()=>{D({Edit:!1}),void 0!==s&&s(),A(),F()},commentId:r.id,content:r.content,categoryNames:r.categories.map(e=>e.name)}),H.delete&&(0,o.jsx)(x.b,{icon:(0,o.jsx)(V.Z,{size:"1rem"}),title:"댓글을 삭제하시겠습니까?",color:"red",withCloseButton:!0,onClose:()=>{K({delete:!1})},children:(0,o.jsxs)(d.K,{spacing:"xs",children:["댓글을 삭제하면 되돌릴 수 없습니다.",(0,o.jsx)(m.Z,{position:"right",children:(0,o.jsx)(j.z,{variant:"light",color:"red",className:g.deleteButton,onClick:()=>{K({delete:!1}),ej(r.id,v).then(()=>{void 0!==s&&s(),M(),A(),_(),(0,U.c0)("댓글 삭제 완료","댓글이 성공적으로 삭제되었습니다.")})},children:"삭제"})})]})}),(0,o.jsxs)(m.Z,{spacing:8,children:[(0,o.jsxs)(m.Z,{spacing:5,children:[(0,o.jsxs)(ei.Z,{onClick:()=>{if(!f){y();return}(0,ex.y)({data:{boardId:r.id,token:v}},P).then(()=>{void 0!==s&&s(),A(),M()}).catch(e=>{})},children:[P&&(0,o.jsx)(ee.E,{className:g.heartFilled,width:"1.15rem",height:"1rem",src:"/images/HeartFilled.svg"}),!P&&(0,o.jsx)(er.Z,{size:22,color:h.colors.gray[6]})]}),(0,o.jsx)(p.x,{color:h.colors.gray[6],size:"xs",children:r.likeCount})]}),!R.Edit&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ei.Z,{onClick:()=>{if(!f){y();return}C(),b||w||z()},children:(0,o.jsxs)(m.Z,{spacing:5,children:[(0,o.jsx)(ea.Z,{size:22,color:h.colors.gray[6]}),(0,o.jsx)(p.x,{color:h.colors.gray[6],size:"xs",children:"답하기"})]})}),!H.delete&&(null!==r.content?(0,o.jsxs)(et.v,{shadow:"md",width:120,position:"bottom-start",offset:1,children:[(0,o.jsx)(et.v.Target,{children:(0,o.jsx)(en.k,{className:g.dotButton,children:(0,o.jsx)(es,{size:22,color:h.colors.gray[6]})})}),(0,o.jsxs)(et.v.Dropdown,{children:[!R.canEdit&&(0,o.jsx)(et.v.Item,{icon:(0,o.jsx)(el.Z,{size:18,stroke:2}),className:g.menuItem,children:"신고하기"}),R.canEdit&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(et.v.Item,{onClick:()=>{D({Edit:!0}),F()},icon:(0,o.jsx)(ec.Z,{size:18,stroke:2}),className:g.menuItem,children:"수정하기"}),(0,o.jsx)(et.v.Divider,{}),(0,o.jsx)(et.v.Item,{onClick:()=>{K({delete:!0})},icon:(0,o.jsx)(ed.Z,{size:18,stroke:2}),className:g.menuItem,children:"삭제하기"})]})]})]}):null)]})]})]}),(0,o.jsx)(eo.i,{className:g.divider,labelPosition:"right",label:(0,o.jsx)(ei.Z,{onClick:z,children:(0,o.jsxs)(m.Z,{spacing:5,align:"center",children:[(0,o.jsx)(p.x,{color:h.colors.gray[6],size:"sm",children:w?"답글 접기":"답글 보기"}),w?(0,o.jsx)(em.Z,{size:16,color:h.colors.gray[6]}):(0,o.jsx)(eh.Z,{size:16,color:h.colors.gray[6]})]})})}),(0,o.jsx)(Z.U,{in:b,children:f&&(0,o.jsx)(Q,{user:f,placeholder:"답글을 작성해주세요.",onSubmit:async e=>null==l?void 0:l(e,r.id).then(()=>{M(),"<p></p>"!==e&&((0,U.c0)("답글 등록 완료","답글이 성공적으로 등록되었습니다."),C()),w||z()})})})]}),(0,o.jsx)(Z.U,{in:w,children:(0,o.jsxs)(d.K,{spacing:0,children:[I?(0,o.jsx)(p.x,{size:"sm",color:h.colors.gray[6],align:"center",className:g.noComment,children:"등록된 답글이 없습니다."}):null==E?void 0:E.map(t=>t.data.data.map(t=>(0,o.jsx)(e,{post:t,mutateReply:()=>{A(),M()},onSubmitComment:async(e,t)=>null==l?void 0:l(e,t)},t.id))),!O&&!I&&(L?(0,o.jsx)(k.M,{className:g.moreButton,children:(0,o.jsx)(N.a,{size:"sm"})}):(0,o.jsx)(ei.Z,{onClick:()=>{B(e=>e+1)},className:g.moreButton,children:(0,o.jsx)(p.x,{color:"gray",size:"sm",children:"답글 더보기"})}))]})})]})};let ey=(0,f.k)(e=>({commentSection:{paddingRight:7},moreButton:{height:30,textDecoration:"underline"}})),eb=(0,J.createContext)({mutateComment:()=>{}});var eC=function(e){let{parentId:t,categoryNames:n,editorOpen:i,onSubmitComment:r}=e,{classes:s}=ey(),{data:l,setSize:c,isLast:m,isLoading:h,mutate:u}=(0,eg.Z)(n,{parentId:t}),{mutatePostDetail:g}=(0,J.useContext)(eT),{user:x}=(0,a.Z)();return(0,J.useEffect)(()=>{c(1)},[]),(0,o.jsx)(eb.Provider,{value:{mutateComment:u},children:(0,o.jsxs)(d.K,{spacing:0,className:s.commentSection,children:[(0,o.jsx)(Z.U,{in:i,children:x&&(0,o.jsx)(Q,{user:x,placeholder:"댓글을 작성해주세요.",onSubmit:async e=>"<p></p>"===e?(0,U.c0)("댓글 내용 없음","댓글 내용을 작성해주세요."):null==r?void 0:r(e,t).then(()=>{u(),g(),(0,U.c0)("댓글 등록 완료","댓글이 성공적으로 등록되었습니다.")})})}),null==l?void 0:l.map(e=>e.data.data.map(e=>(0,o.jsx)(ef,{post:e,onSubmitComment:async(e,t)=>null==r?void 0:r(e,t)},e.id))),!m&&(h?(0,o.jsx)(k.M,{className:s.moreButton,children:(0,o.jsx)(N.a,{size:"sm"})}):(0,o.jsx)(ei.Z,{onClick:()=>{c(e=>e+1)},className:s.moreButton,children:(0,o.jsx)(p.x,{color:"gray",size:"sm",children:"댓글 더보기"})}))]})})},eZ=n(1117),ek=n(7466),eN=n(7248);async function ew(e){let{data:{boardId:t,data:n,token:o}}=e,i="".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/community/board/").concat(t);try{let e=await $.Z.patch(i,n,{headers:{"Content-Type":"application/json",Authorization:"".concat(o)}});return e.data}catch(e){throw e}}var ez=n(3777),eE=n(9918),eB=n(1209),eS=n(4588),eI=n(653),eM=n(8290),eO=n(2158);let eL=(0,f.k)(e=>({deleteAlert:{marginBottom:"1rem"},deleteButton:{border:"1px solid ".concat(e.colors.red[6])},footer:{padding:"0px 5px 5px 5px",borderBottom:"2px solid ".concat(e.colors.gray[9])},heartFilled:{marginLeft:"0.1rem",marginRight:"0.1rem"},dotButton:{height:25,borderRadius:5,"&:hover":{backgroundColor:e.colors.gray[1]}},menuItem:{padding:5}}));var eP=function(e){let{onCommentClick:t,onLikeClick:n,onShareClick:r,onBookmarkClick:s,onEditClick:l,commentCount:c,likeCount:h,isliking:u,isEditing:g,canEdit:v,postId:f}=e,{classes:y}=eL(),b=(0,i.useRouter)(),[C,Z]=(0,X.v)({delete:!1}),{token:k}=(0,a.Z)();return(0,o.jsxs)(d.K,{spacing:0,children:[C.delete&&(0,o.jsx)(x.b,{className:y.deleteAlert,icon:(0,o.jsx)(V.Z,{size:"1rem"}),title:"게시글을 삭제하시겠습니까?",color:"red",withCloseButton:!0,onClose:()=>{Z({delete:!1})},children:(0,o.jsxs)(d.K,{spacing:"xs",children:["게시글을 삭제하면 되돌릴 수 없습니다.",(0,o.jsx)(m.Z,{position:"right",children:(0,o.jsx)(j.z,{variant:"light",color:"red",className:y.deleteButton,onClick:()=>{Z({delete:!1}),ej(f,k).then(()=>{b.push("/community")})},children:"삭제"})})]})}),(0,o.jsxs)(m.Z,{position:"apart",className:y.footer,children:[(0,o.jsxs)(m.Z,{spacing:13,children:[(0,o.jsxs)(m.Z,{spacing:8,children:[(0,o.jsx)(ea.Z,{size:25,onClick:t}),(0,o.jsx)(p.x,{children:c})]}),(0,o.jsxs)(m.Z,{spacing:8,children:[(0,o.jsxs)(ei.Z,{onClick:n,children:[u&&(0,o.jsx)(ee.E,{className:y.heartFilled,width:"1.4rem",height:"1.2rem",src:"/images/HeartFilled.svg"}),!u&&(0,o.jsx)(er.Z,{size:25})]}),(0,o.jsx)(p.x,{children:h})]}),(0,o.jsx)(ei.Z,{onClick:r,children:(0,o.jsx)(eI.Z,{size:25})}),(0,o.jsx)(ei.Z,{onClick:s,children:(0,o.jsx)(eM.Z,{size:25})})]}),!g&&!C.delete&&(0,o.jsx)(m.Z,{children:(0,o.jsxs)(et.v,{shadow:"md",width:120,position:"bottom-end",offset:1,children:[(0,o.jsx)(et.v.Target,{children:(0,o.jsx)(en.k,{className:y.dotButton,children:(0,o.jsx)(eO.Z,{})})}),(0,o.jsxs)(et.v.Dropdown,{children:[!v&&(0,o.jsx)(et.v.Item,{icon:(0,o.jsx)(el.Z,{size:18,stroke:2}),className:y.menuItem,children:"신고하기"}),v&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(et.v.Item,{onClick:l,icon:(0,o.jsx)(ec.Z,{size:18,stroke:2}),className:y.menuItem,children:"수정하기"}),(0,o.jsx)(et.v.Divider,{}),(0,o.jsx)(et.v.Item,{onClick:()=>{Z({delete:!0})},icon:(0,o.jsx)(ed.Z,{size:18,stroke:2}),className:y.menuItem,children:"삭제하기"})]})]})]})})]})]})};let eT=(0,J.createContext)({mutatePostDetail:()=>{}});var eR=function(e){let{post:t}=e,{classes:n}=y(),s=(0,c.rZ)(),{token:l,user:f,openSignInModal:Z}=(0,a.Z)(),k=(0,i.useRouter)(),[N,{toggle:w}]=(0,ep.q)(!0),z=[];for(let e=0;e<ek.aq;e++){let t=ek.$m[e];t.forEach(e=>{z.push(e.label)})}let E=t.like,[B,S]=(0,X.v)({Edit:!1,cancel:!1}),I=(0,eN.c)({initialValues:{title:t.title?t.title:"",category:t.categories.map(e=>e.name)}}),M=(0,J.useRef)(null),{canCloseModal:O}=(0,J.useContext)(ev.tC),L=t.parent?"child":"post",P=async()=>{(0,r.JG)("".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/community/board/").concat(t.id))};return(0,o.jsx)(eT.Provider,{value:{mutatePostDetail:P},children:(0,o.jsx)(C.Z,{className:n.postContainer,children:(0,o.jsxs)(d.K,{spacing:15,children:[(0,o.jsxs)(d.K,{spacing:14,children:["child"===L&&(0,o.jsx)(ei.Z,{center:!1,onClick:e=>{var n;e.stopPropagation(),k.replace("http://localhost:3000/community/".concat(null===(n=t.parent)||void 0===n?void 0:n.id))},children:(0,o.jsxs)(m.Z,{spacing:0,children:[(0,o.jsx)(eB.Z,{color:"#228be6"}),(0,ev.z2)(t)]})}),null!==t.author?(0,o.jsx)(b.Z,{user:t.author,date:t.createdAt}):null,!B.Edit&&(0,o.jsxs)(d.K,{spacing:7,children:[(0,o.jsx)(h.D,{order:3,children:t.title}),null!==t.content?(0,o.jsx)(u.l,{children:(0,o.jsx)("div",{className:n.content,dangerouslySetInnerHTML:{__html:t.content}})}):(0,o.jsx)(p.x,{color:s.colors.gray[4],children:"(삭제된 게시물 입니다.)"})]}),B.Edit&&(0,o.jsx)("form",{onSubmit:I.onSubmit(e=>{let n=M.current.getHTML(),o={...e,content:n};0===o.category.length?(0,U.c0)("카테고리 없음","카테고리를 1개 이상 추가해주세요."):"<p></p>"===o.content?(0,U.c0)("본문 없음","본문 내용을 추가해주세요."):""===o.title?(0,U.c0)("제목 없음","제목을 추가해주세요."):ew({data:{boardId:t.id,data:{title:o.title,content:o.content,categoryNames:o.category},token:l}}).then(()=>{(0,U.c0)("업로드 완료","게시물이 성공적으로 수정되었습니다."),S({Edit:!1}),P()})}),children:(0,o.jsxs)(d.K,{className:n.editorContainer,spacing:17,children:[(0,o.jsx)(g.o,{placeholder:"멋진 제목을 입력해주세요.","data-autofocus":!0,onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()},...I.getInputProps("title")}),(0,o.jsx)(ez.Z,{ref:M,content:t.content}),(0,o.jsx)(eE.Z,{defaultValue:t.categories.map(e=>e.name),onChange:e=>{I.setFieldValue("category",e)}}),B.cancel&&(0,o.jsx)(x.b,{icon:(0,o.jsx)(V.Z,{size:"1rem"}),title:"게시글 수정을 취소하시겠습니까?",color:"red",withCloseButton:!0,onClose:()=>{S({cancel:!1})},children:(0,o.jsxs)(d.K,{spacing:"xs",children:["게시글 수정을 취소하면 현재 수정된 내용을 모두 잃습니다.",(0,o.jsx)(m.Z,{position:"right",children:(0,o.jsx)(j.z,{variant:"light",color:"gray",className:n.cancelButton,onClick:()=>{S({Edit:!1}),S({cancel:!1}),O()},children:"취소"})})]})}),!B.cancel&&(0,o.jsxs)(m.Z,{position:"right",spacing:"sm",children:[(0,o.jsx)(j.z,{className:n.editButton,variant:"light",color:"gray",onClick:()=>{S({cancel:!0})},children:"취소"}),(0,o.jsx)(eS.w,{text:"수정",type:"submit",className:n.editButton,onClick:()=>{O()}})]})]})})]}),(0,o.jsxs)(d.K,{spacing:0,children:[!B.Edit&&(0,o.jsx)(v.NU,{className:n.multiSelect,data:z,value:t.categories.map(e=>e.name),readOnly:!0}),(0,o.jsx)(eP,{onCommentClick:()=>{w()},onLikeClick:()=>{if(!f){Z();return}(0,ex.y)({data:{boardId:t.id,token:l}},E).then(()=>{P()}).catch(e=>{})},onEditClick:()=>{S({Edit:!0}),O()},postId:t.id,commentCount:t.childCount,likeCount:t.likeCount,isliking:E,isEditing:null===t.content||B.Edit,canEdit:!!f&&null!==t.author&&t.author.id===f.id})]}),(0,o.jsx)(eC,{parentId:t.id,categoryNames:t.categories.map(e=>e.name),editorOpen:N,onSubmitComment:async(e,n)=>"<p></p>"===e?(0,U.c0)("댓글 없음","댓글 내용을 입력해 주세요."):(0,eZ.l)({content:e,parentId:n,categoryNames:t.categories.map(e=>e.name)},l)})]})})})},eD=n(9827);let eH=(0,f.k)(e=>({container:{display:"flex",width:"100%",gap:83,height:"100%"},mainContainer:{display:"flex",flexDirection:"column",alignItems:"center",padding:20,flexGrow:1,gap:39},rightContainer:{width:260,margin:0}}));var eK=function(e){let{children:t,rightSection:n}=e,{classes:i}=eH();return(0,o.jsxs)("div",{className:i.container,children:[(0,o.jsx)("div",{className:i.mainContainer,children:t}),(0,o.jsx)("div",{className:i.rightContainer,children:n})]})},e_=function(){let e=(0,i.useRouter)(),t=e.query.id?e.query.id.toString():void 0,{data:n}=l(t);return(0,o.jsx)(eK,{rightSection:(0,o.jsx)(eD.K,{onSearchSubmit:e=>{console.log(e)}}),children:n&&(0,o.jsx)(eR,{post:n.data})})}},3237:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var o=n(2752),i=n(2376),r=n(4348);let a=o.hj.create({name:"placeholder",addOptions:()=>({emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}),addProseMirrorPlugins(){return[new i.Sy({key:new i.H$("placeholder"),props:{decorations:({doc:e,selection:t})=>{let n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:o}=t,i=[];if(!n)return null;let a=e.type.createAndFill(),s=(null==a?void 0:a.sameMarkup(e))&&null===a.content.findDiffStart(e.content);return e.descendants((e,t)=>{let n=o>=t&&o<=t+e.nodeSize,a=!e.isLeaf&&!e.childCount;if((n||!this.options.showOnlyCurrent)&&a){let o=[this.options.emptyNodeClass];s&&o.push(this.options.emptyEditorClass);let a=r.p.node(t,t+e.nodeSize,{class:o.join(" "),"data-placeholder":"function"==typeof this.options.placeholder?this.options.placeholder({editor:this.editor,node:e,pos:t,hasAnchor:n}):this.options.placeholder});i.push(a)}return this.options.includeChildren}),r.EH.create(e,i)}}})]}})}},function(e){e.O(0,[911,436,411,46,180,750,346,774,888,179],function(){return e(e.s=8689)}),_N_E=e.O()}]);
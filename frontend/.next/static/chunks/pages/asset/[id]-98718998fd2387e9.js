(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[543],{3217:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/asset/[id]",function(){return n(7975)}])},1576:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(5893),o=n(2445),r=n(1485);let i=(0,r.k)((e,t)=>{let{shadow:n,borderRadius:a}=t;return{cardContainer:{boxShadow:"0px 3px ".concat(n,"px rgba(0, 0, 0, 0.2)"),borderRadius:a,margin:"0"}}});var s=function(e){let{children:t,shadow:n=10,borderRadius:r=15,className:s,...c}=e,{classes:l,cx:d}=i({shadow:n,borderRadius:r});return(0,a.jsx)(o.W,{className:d(l.cardContainer,s),...c,children:t})}},1822:function(e,t,n){"use strict";n.d(t,{u:function(){return a}});let a=[{src:"https://cdn.class101.net/images/171f6948-4553-4cd4-9fcd-98f9dd61c547/1200x630",href:"https://mantine.dev",avatar:"https://cdn.class101.net/images/171f6948-4553-4cd4-9fcd-98f9dd61c547/1200x630",gameName:"해바라기 소녀",gameExplain:'"해바라기 소녀"는 사랑스러운 비주얼 노벨 게임으로, 일상의 빛을 찾는 여행에 초대합니다. 이야기는 자신을 해바라기에 빗대는 밝고 낙천적인 소녀, 지연의 삶을 중심으로 펼쳐집니다. 그녀의 일상과 꿈, 그리고 그녀가 마주하는 다양한 인물들의 이야기를 경험하게 될 것입니다.'},{src:"https://i3.ruliweb.com/img/22/10/01/18393ee297a1734b9.jpeg",href:"https://mantine.dev",avatar:"https://i3.ruliweb.com/img/22/10/01/18393ee297a1734b9.jpeg",gameName:"나히다",gameExplain:'"나히다"는 고요한 마을의 신비를 탐색하는 감각적인 비주얼 노벨 게임입니다. 귀엽고 아름다운 그래픽과 중독성 있는 스토리텔링은 당신을...'}]},7975:function(e,t,n){"use strict";n.r(t),n.d(t,{AssetContext:function(){return e6},AssetTabClickContext:function(){return e9},default:function(){return te}});var a=n(5893),o=n(7294),r=n(1485);let i=(0,r.k)(e=>({backgroundImage:{display:"flex",alignItems:"center",textDecoration:"none","&:hover":{textDecoration:"none"}},imageContainer:{width:"100%",height:"100%",padding:0,borderRadius:"1rem",backgroundColor:e.colors.gray[2]},image:{height:"100%",".mantine-Image-imageWrapper, .mantine-Image-figure, .mantine-Image-image":{height:"100%"}},carousel:{width:"100%",height:"100%",".mantine-Carousel-root, .mantine-Carousel-container, .mantine-Carousel-viewport":{height:"100%"},".mantine-Carousel-control":{backgroundColor:"transparent",border:"none",boxShadow:"none"},".mantine-Carousel-indicator":{width:"2rem",height:"0.4rem",transition:"width 250ms ease","&[data-active]":{width:"3rem",backgroundColor:e.colors.blue[3]}},[e.fn.smallerThan(820)]:{".mantine-Carousel-indicators":{gap:"0.3rem"},".mantine-Carousel-indicator":{width:"1.3rem",height:"0.26rem","&[data-active]":{width:"2rem"}}},[e.fn.smallerThan(540)]:{".mantine-Carousel-indicators":{gap:"0.15rem"},".mantine-Carousel-indicator":{width:"0.65rem",height:"0.13rem","&[data-active]":{width:"1rem"}}}}}));var s=n(4472),c=n(1411),l=n(1822),d=n(8553),m=n.n(d),h=n(8528),u=n(4065),x=n(1209),p=n(3865),g=n(2445),f=n(2870);function j(e){let{imgUrls:t}=e,{classes:n,cx:r}=i(),[d,j]=(0,o.useState)(null);(0,s.D)(d,200);let w=(0,o.useRef)(m()({delay:4e3})),[v]=(0,h.n)((null==t?void 0:t.map(e=>({src:e})))||l.u),b=(0,u.a)("(max-width: 820px)"),k=(0,u.a)("(max-width: 540px)"),C=v.map(e=>(0,a.jsx)(c.l.Slide,{children:(0,a.jsx)(g.W,{className:n.imageContainer,children:(0,a.jsx)(f.E,{className:n.image,width:"100%",height:"100%",radius:"lg",fit:"contain",src:e.src})})}));return(0,a.jsx)(c.l,{className:n.carousel,slideSize:"100%",slideGap:"md",loop:!0,draggable:!1,withIndicators:!0,previousControlIcon:(0,a.jsx)(x.Z,{color:"white",size:k?"1rem":b?"2rem":"3rem"}),nextControlIcon:(0,a.jsx)(p.Z,{color:"white",size:k?"1rem":b?"2rem":"3rem"}),getEmblaApi:j,plugins:[w.current],onMouseEnter:w.current.stop,onMouseLeave:w.current.reset,children:C})}let w=(0,r.k)(e=>({container:{display:"flex",flexWrap:"wrap",width:"100%"},topContainer:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",width:"100%",height:"auto",padding:40,paddingTop:60,gap:20},PhotoContainer:{position:"relative",margin:0,aspectRatio:"8 / 5",width:800},summaryContainer:{margin:0,width:430,height:500,flexGrow:1},tabBottomContainer:{position:"relative",width:"100%",height:"100%"},anchor:{position:"absolute",top:"-4.313rem"},tabContainer:{position:"sticky",top:"4.313rem",width:"100%",height:"3rem",zIndex:50},bottomContainer:{display:"flex",flexWrap:"nowrap",width:"100%",height:"100%",padding:40,gap:40},mainContainer_B:{flexGrow:1,flexShrink:0,width:700,margin:0},rightContainer_B:{position:"sticky",top:"9.75rem",flexShrink:0,width:"25rem",height:"37rem",margin:0},mainContainer_S:{flexGrow:1,margin:0},rightContainer_S:{display:"none"}}));var v=function(e){let{photoSection:t,summarySection:n,anchorSection:o,tabSection:r,children:i,rightSection:s}=e,{classes:c,cx:l}=w(),d=(0,u.a)("(max-width: 780px)");return(0,a.jsxs)("div",{className:c.container,children:[(0,a.jsxs)("div",{className:c.topContainer,children:[(0,a.jsx)("div",{className:c.PhotoContainer,children:t}),(0,a.jsx)("div",{className:c.summaryContainer,children:n})]}),(0,a.jsxs)("div",{className:c.tabBottomContainer,children:[(0,a.jsx)("div",{className:c.anchor,children:o}),(0,a.jsx)("div",{className:c.tabContainer,children:r}),(0,a.jsxs)("div",{className:c.bottomContainer,children:[(0,a.jsx)("div",{className:l(d?c.mainContainer_S:c.mainContainer_B),children:i}),(0,a.jsx)("div",{className:l(d?c.rightContainer_S:c.rightContainer_B),children:s})]})]})]})},b=n(7414),k=n(263),C=n(3951),z=n(7564),y=n(1232),Z=n(5117),N=n(9985),I=n(7841),T=n(3523),S=n(5938),B=n(434);let L=(0,r.k)(e=>({modal:{display:"flex",width:"21.875rem",".mantine-Modal-title":{marginLeft:"0.1rem",fontSize:"1.2rem"}},stack:{cursor:"default"},heartFilled:{marginRight:"0.2rem"},alignTop:{alignItems:"flex-start"},alignBottom:{alignItems:"flex-end"},grayText:{marginLeft:"0.5rem",color:e.colors.gray[6]},blueText:{position:"absolute",marginLeft:"6.5rem",color:e.colors.blue[4],textDecoration:"underLine","&:hover":{color:e.colors.blue[4],textDecoration:"underLine"}},followBadge:{width:"6rem",height:"2rem",padding:"0rem 0.3rem",".mantine-Badge-leftSection":{marginRight:"0.7rem"}},tagGroup:{maxHeight:"4.3rem",overflow:"hidden"},tagBox:{position:"relative",display:"flex",flexWrap:"wrap",justifyContent:"space-between",height:"4.3rem",margin:"0rem 0.1875rem",padding:0,backgroundColor:"#fcfcfe","&::after":{content:'""',flexGrow:100,height:"1.988rem"}},tag:{display:"flex",flexGrow:1,height:"1.8rem",margin:"0.1875rem 0.3125rem",paddingLeft:"0.5rem",paddingRight:"0.75rem",borderRadius:"0.25rem",justifyContent:"center",alignItems:"center",backgroundColor:e.colors.blue[1],color:e.colors.blue[6],fontSize:12,fontWeight:"bold"},addButton:{display:"flex",height:"1.8rem",margin:"0.1875rem 0.3125rem",paddingLeft:"0.5rem",paddingRight:"0.5rem",justifyContent:"center",alignItems:"center",backgroundColor:e.colors.blue[1],color:e.colors.blue[6],fontSize:16,"&:hover":{backgroundColor:e.colors.blue[2]}},addButton_A:{position:"absolute",top:"2.175rem",right:"0rem",boxShadow:"-7px 0px 4px #fcfcfe"},marginTop:{marginTop:"0.44rem"},marginBottom:{marginBottom:"0.44rem"},marginLeft:{marginLeft:"0.5rem",marginRight:"0.5rem"},sellButton:{width:"8rem",height:"4.7rem",flexGrow:1},passButton:{width:"7rem",height:"4.7rem"},downloadButton:{width:"100%",height:"55px"}}));var A=n(1759),R=n(61),_=n(5909),P=n(7283),G=n(9153),E=n(8233),M=n(8823);let H=(0,r.k)(e=>({multiSelectBox:{width:"100%",height:"18.75rem",padding:"0.5rem",border:"1px solid ".concat(e.colors.gray[4]),borderRadius:e.radius.sm,overflow:"hidden"},searchGroup:{display:"flex",margin:"0rem 0.3125rem",gap:"0.5rem"},search:{flexGrow:1,border:"0.0625rem solid ".concat(e.colors.gray[4]),borderRadius:e.radius.sm,".mantine-TextInput-input":{backgroundColor:"transparent",border:"none"}},tagBox:{display:"flex",flexWrap:"wrap",width:"100%",height:"100%",padding:0,margin:0,alignContent:"flex-start","&::after":{content:'""',flexGrow:100,height:"1.988rem"}},selectedGroup:{alignItems:"flex-end"},selectedBox:{display:"flex",flexWrap:"wrap",width:"20rem",minHeight:"2.5rem",maxHeight:"4.7rem",padding:"0.1rem 0.5rem",border:"1px solid ".concat(e.colors.gray[4]),borderRadius:e.radius.sm,flexGrow:1,overflow:"hidden",alignContent:"flex-start","&::after":{content:'""',flexGrow:100,height:"1.988rem"}},selectedTag:{display:"flex",flexGrow:1,height:"1.8rem",margin:"0.1875rem 0.3125rem",paddingLeft:"0.5rem",paddingRight:"0.3rem",borderRadius:"0.25rem",justifyContent:"center",alignItems:"center",backgroundColor:e.colors.blue[1],color:e.colors.blue[6],fontSize:12,fontWeight:"bold"},tagButton:{display:"flex",flexGrow:1,height:"1.8rem",margin:"0.1875rem 0.3125rem",paddingLeft:"0.5rem",paddingRight:"0.5rem",justifyContent:"center",alignItems:"center",border:"1px solid ".concat(e.colors.gray[4]),backgroundColor:"white",color:e.colors.gray[6],fontSize:12,"&:hover":{backgroundColor:e.colors.gray[2]}},tagButtonChecked:{border:"1px solid ".concat(e.colors.blue[1]," !important"),backgroundColor:e.colors.blue[1],color:e.colors.blue[6],fontSize:12,"&:hover":{border:"1px solid ".concat(e.colors.blue[2]),backgroundColor:e.colors.blue[2]}}}));var K=n(5591),D=n(7967),W=n(6154);async function q(e,t,n){let{data:a}=await W.Z.post("".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/tag"),t,{headers:{"Content-Type":"application/json",Authorization:"".concat(n)}});return a}async function F(e,t,n){try{await W.Z.delete("".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/tag/").concat(t),{headers:{"Content-Type":"application/json",Authorization:n}})}catch(e){console.error(e)}}function U(e){let{onClose:t,assetId:n}=e,{classes:r,cx:i}=H(),s=(0,k.rZ)(),{token:c}=(0,M.Z)(),{mutateAsset:l}=(0,o.useContext)(e6),{data:d}=function(e){let{token:t}=(0,M.Z)(),n="".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/tag"),a=(0,K.ZP)(n,e=>(0,D._)(e,t));return a}(n),m=d?d.data.map(e=>e.tag.name):[],[h,u]=(0,o.useState)([...m]);(0,o.useEffect)(()=>{u([...m])},[d]);let x=(0,o.useRef)(null),[p,g]=(0,o.useState)(""),{data:f}=function(e){let{token:t}=(0,M.Z)(),n="".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/game/tag/search?q=").concat(e),a=(0,K.ZP)(n,e=>(0,D._)(e,t));return a}(p),j=(0,_.P)(),w=null==f?void 0:f.data.map(e=>{let t=null==h?void 0:h.includes(e.name);return(0,a.jsx)(I.z,{className:i(r.tagButton,t&&r.tagButtonChecked),onClick:()=>{if(t||h.length<5){let n=[...h];t?h.forEach((t,a)=>{e.name===t&&(n.splice(a,1),u(n))}):(n.push(e.name),u(n)),(0,E.fd)()}else(0,E.x2)("태그는 5개까지 추가할 수 있습니다.",null)},children:e.name})}),v=h.map(e=>(0,a.jsx)(b.x,{className:r.selectedTag,children:(0,a.jsxs)(y.Z,{spacing:"0.3rem",children:[e,(0,a.jsx)(S.Z,{onClick:()=>{let t=[...h];h.forEach((n,a)=>{e===n&&(t.splice(a,1),u(t))}),(0,E.fd)()},children:(0,a.jsx)(P.Z,{stroke:2,size:"0.8rem",color:s.colors.blue[6]})})]})}));return(0,a.jsxs)(z.K,{spacing:"sm",children:[(0,a.jsx)(b.x,{className:r.multiSelectBox,children:(0,a.jsxs)(z.K,{spacing:"0.4rem",children:[(0,a.jsxs)(y.Z,{className:r.searchGroup,ref:j,children:[(0,a.jsx)(G.Z,{stroke:2,size:"1.2rem",color:s.colors.gray[6]}),(0,a.jsx)(R.o,{className:r.search,placeholder:"원하는 태그를 검색해서 추가해보세요.","data-autofocus":!0,ref:x,onKeyDown:e=>{var t;"Enter"===e.key?g(x.current?x.current.value:""):(null===(t=x.current)||void 0===t?void 0:t.value)===""&&g("")},rightSection:(0,a.jsx)(S.Z,{onClick:()=>{g("")},children:(0,a.jsx)(P.Z,{stroke:1.5,size:"1rem",color:s.colors.gray[5]})})})]}),(0,a.jsx)(b.x,{className:r.tagBox,children:w})]})}),(0,a.jsxs)(y.Z,{spacing:"xs",className:r.selectedGroup,children:[(0,a.jsx)(b.x,{className:r.selectedBox,children:v}),(0,a.jsx)(I.z,{variant:"light",color:"cyan",h:"2.5rem",onClick:()=>{d&&d.data.forEach(e=>{h.includes(e.tag.name)||(F(n,e.id,c),console.log("delete ".concat(e.tag.name)))}),h.forEach(e=>{m.includes(e)||(q(n,{tagName:e},c),console.log("post ".concat(e)))}),l(),t&&t()},children:"추가"})]})]})}async function O(e,t){let{data:n}=await W.Z.post("".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/like"),{},{headers:{"Content-Type":"application/json",Authorization:"".concat(t)}});return n}async function V(e,t){let{data:n}=await W.Z.delete("".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/like"),{headers:{"Content-Type":"application/json",Authorization:"".concat(t)}});return n}async function X(e,t){var n;let a=await W.Z.get("".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/download"),{responseType:"blob",headers:{Authorization:"".concat(t)}}),o=a.headers["content-disposition"],r="unknown";if(o){let e=o.match(/filename="(.+)"/);e&&e.length>1&&(r=decodeURIComponent(r=e[1]))}let i=window.URL.createObjectURL(new Blob([a.data])),s=document.createElement("a");s.href=i,s.setAttribute("download",r),document.body.appendChild(s),s.click(),null===(n=s.parentNode)||void 0===n||n.removeChild(s)}async function Y(e,t){await W.Z.post("".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/purchase"),{},{headers:{Authorization:"".concat(t)}})}function J(e){let{asset:t}=e,{classes:n,cx:r}=L(),[i,{open:s,close:c}]=(0,A.q)(!1),[l,d]=(0,o.useState)(!1),m=t.popularTags.map(e=>(0,a.jsx)(b.x,{className:n.tag,children:e.name})),h=(0,o.useRef)(null),[u,x]=(0,o.useState)(null),p=()=>h.current?h.current.scrollHeight>h.current.clientHeight:null;(0,o.useEffect)(()=>{x(p())},[]);let{user:g,token:j}=(0,M.Z)(),{mutateAsset:w}=(0,o.useContext)(e6),v=(0,k.rZ)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.u,{className:n.modal,opened:i,onClose:c,title:"태그 추가",centered:!0,children:(0,a.jsx)(U,{onClose:c,assetId:t.id})}),(0,a.jsxs)(z.K,{justify:"space-between",sx:{height:"100%"},children:[(0,a.jsxs)(z.K,{spacing:"1rem",className:r(n.stack,n.marginLeft),children:[(0,a.jsxs)(z.K,{spacing:"0.5rem",className:n.stack,children:[(0,a.jsxs)(y.Z,{position:"apart",children:[(0,a.jsx)(Z.x,{fz:20,c:"gray",children:t.category.name}),(0,a.jsxs)(y.Z,{spacing:7,children:[(0,a.jsx)(S.Z,{onClick:()=>{t.like?V(t.id,j).then(()=>{w()}):O(t.id,j).then(()=>{w()})},children:t.like?(0,a.jsx)(B.Z,{size:"2rem",stroke:1,fill:v.colors.red[6]}):(0,a.jsx)(B.Z,{size:"2rem",stroke:1})}),t.likeCount]})]}),(0,a.jsx)(Z.x,{fw:"bold",fz:32,children:t.title})]}),(0,a.jsxs)(z.K,{spacing:16,w:"100%",className:n.stack,children:[(0,a.jsxs)(y.Z,{spacing:8,children:[(0,a.jsx)(N.q,{size:36,radius:"lg",src:"https://avatars.githubusercontent.com/u/52057157?v=4"}),(0,a.jsx)(Z.x,{fz:18,children:t.author.name})]}),(0,a.jsxs)(y.Z,{spacing:6,children:[(0,a.jsx)(f.E,{src:"/images/token.svg",width:32,height:32}),(0,a.jsx)(Z.x,{fz:24,fw:"bold",children:t.cost.isSale?t.cost.saledPrice:t.cost.defaultPrice})]})]})]}),(0,a.jsxs)(z.K,{spacing:"1rem",className:r(n.stack,n.marginLeft),children:[(0,a.jsx)(z.K,{spacing:17,children:(0,a.jsxs)(z.K,{spacing:7,children:[(0,a.jsx)(Z.x,{className:r(n.marginTop,n.marginLeft),fw:"bold",children:"이 에셋의 인기 태그 :"}),(0,a.jsx)(b.x,{className:n.tagGroup,children:(0,a.jsxs)(b.x,{className:n.tagBox,ref:h,children:[m,(0,a.jsx)(I.z,{className:r(n.addButton,u?n.addButton_A:null),onClick:s,children:"+"})]})})]})}),(0,a.jsx)(I.z,{className:n.downloadButton,disabled:!!(!t.isPurchased&&(!g||g.token<(t.cost.isSale?t.cost.saledPrice:t.cost.defaultPrice))),onClick:()=>{t.isPurchased?X(t.id,j):Y(t.id,j).then(()=>{w(),(0,E.c0)("결제 완료!","이제 에셋을 다운로드 할 수 있습니다.")})},children:(0,a.jsx)(T.M,{children:(0,a.jsx)(Z.x,{fz:28,children:t.isPurchased?"다운로드":"구매하기"})})})]})]})]})}var Q=n(1141);let $=(0,r.k)(e=>({tabList:{position:"relative",boxSizing:"border-box",width:"100%",height:"3rem",borderBottom:"0.2rem solid #fcfcfe",paddingLeft:"2.3rem",backgroundColor:"#fcfcfe",boxShadow:"0px 6px 7px rgba(0, 0, 0, 0.1)"},tabItem_B:{width:"8rem",height:"3rem",fontSize:"1rem","&:hover":{backgroundColor:"transparent",borderBottom:"0.2rem solid #fcfcfe"}},tabItem_S:{width:"5rem",height:"3rem",fontSize:"0.8rem","&:hover":{backgroundColor:"transparent",borderBottom:"0.2rem solid #fcfcfe"}},tabItemActive:{color:"".concat(e.colors.blue[6]," !important"),borderBottom:"0.2rem solid ".concat(e.colors.blue[6]),"&:hover":{borderBottom:"0.2rem solid ".concat(e.colors.blue[6])}}}));function ee(e){let{activeTab:t,setActiveTab:n}=e,{classes:r,cx:i}=$(),s=(0,u.a)("(max-width: 780px)"),c=(0,o.useContext)(e9);return(0,a.jsx)(Q.m,{value:t,onTabChange:n,children:(0,a.jsxs)(Q.m.List,{className:r.tabList,position:"left",children:[(0,a.jsx)(Q.m.Tab,{value:"info",className:i(s?r.tabItem_S:r.tabItem_B,"info"===t&&r.tabItemActive),onClick:c.ontabClickFast,children:"소개"}),(0,a.jsx)(Q.m.Tab,{value:"review",className:i(s?r.tabItem_S:r.tabItem_B,"review"===t&&r.tabItemActive),onClick:c.ontabClickFast,children:"리뷰"})]})})}var et=n(4397);let en=(0,r.k)(e=>({all:{cursor:"default"},infoSection:{width:"100%",height:"100%",padding:"2rem 1.5rem"},infoTypo:{lineHeight:1.2},content:{lineHeight:1.5,"*":{marginBottom:"0px !important"}},marginTop:{marginTop:"3rem"}}));var ea=n(1576);function eo(e){let{asset:t}=e,n=(0,u.a)("(max-width: 765px)"),{classes:o,cx:r}=en();return(0,a.jsxs)(z.K,{spacing:"xl",className:o.all,children:[(0,a.jsx)(Z.x,{fz:n?28:32,children:"에셋 설명"}),(0,a.jsx)(ea.Z,{className:o.infoSection,bg:"white",children:(0,a.jsx)(et.l,{className:o.infoTypo,children:(0,a.jsx)("div",{className:o.content,dangerouslySetInnerHTML:{__html:null==t?void 0:t.description}})})})]})}var er=n(6564);let ei=(0,r.k)(e=>({box:{display:"flex",flexWrap:"wrap",height:"100%",alignContent:"space-between",cursor:"default"},container:{width:"100%"},alignCenter:{display:"flex",alignItems:"center"},containerPadding:{padding:"1rem 0.3rem"},blueText:{color:e.colors.blue[6],"&:hover":{textDecorationLine:"underline"}},marginTop:{position:"relative",marginTop:"0.55rem"}}));function es(e){let{asset:t,loading:n}=e,{classes:o,cx:r}=ei(),i=t.createdAt,[s,c,l]=(null==i?void 0:i.split("-"))||[null,null,null],d="".concat(s,"년 ").concat(c,"월 ").concat(null==l?void 0:l.slice(0,2),"일");return(0,k.rZ)(),(0,a.jsx)(b.x,{className:o.box,children:(0,a.jsx)(ea.Z,{className:r(o.container,o.alignCenter),children:(0,a.jsxs)(z.K,{className:r(o.containerPadding,o.container),spacing:20,children:[(0,a.jsxs)(y.Z,{position:"apart",className:o.container,children:[(0,a.jsx)(Z.x,{size:"md",weight:700,children:"라이선스"}),(0,a.jsxs)(er.z,{width:280,shadow:"sm",position:"bottom-end",children:[(0,a.jsx)(er.z.Target,{children:(0,a.jsx)(Z.x,{className:o.blueText,children:"CC BY"})}),(0,a.jsx)(er.z.Dropdown,{children:(0,a.jsx)(Z.x,{size:"sm",lh:1.3,children:"원작자를 표시하면 저작물을 수정, 재배포, 상업적 이용 등 어떤 방식으로든 사용할 수 있습니다."})})]})]}),(0,a.jsxs)(y.Z,{position:"apart",className:o.container,children:[(0,a.jsx)(Z.x,{size:"md",weight:700,children:"파일 크기"}),(0,a.jsx)(Z.x,{size:"md",children:"111.99 MB"})]}),(0,a.jsxs)(y.Z,{position:"apart",className:o.container,children:[(0,a.jsx)(Z.x,{size:"md",weight:700,children:"최신 버전"}),(0,a.jsx)(Z.x,{size:"md",children:"1.291"})]}),(0,a.jsxs)(y.Z,{position:"apart",className:o.container,children:[(0,a.jsx)(Z.x,{size:"md",weight:700,children:"최신 릴리즈 날짜"}),(0,a.jsx)(Z.x,{size:"md",children:d})]})]})})})}var ec=n(966),el=n(4593),ed=n(7334);let em=(e,t,n,a)=>{if(t&&null===t.data.cursor.afterCursor)return null;let o="";return(o=0===e?"":(0,ed.stringify)({afterCursor:null==t?void 0:t.data.cursor.afterCursor}),void 0===a)?""==o?"".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(n,"/review"):"".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(n,"/review?").concat(o):""==o?"".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(n,"/review/").concat(a,"/comment"):"".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(n,"/review/").concat(a,"/comment?").concat(o)};function eh(e){var t,n,a,o,r,i,s;let{assetId:c,reviewId:l}=e,{token:d}=(0,M.Z)(),m=(0,el.ZP)((e,t)=>em(e,t,c,l),e=>(0,D._)(e,d)),h=(null===(t=null===(n=m.data)||void 0===n?void 0:null===(a=n[m.data.length-1])||void 0===a?void 0:a.data.cursor)||void 0===t?void 0:t.afterCursor)===null,u=(null===(o=m.data)||void 0===o?void 0:null===(r=o[0])||void 0===r?void 0:null===(i=r.data)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.length)===0;return{...m,isLast:h,isEmpty:u}}let eu=(0,r.k)((e,t)=>{let{smallScreen:n}=t;return{all:{cursor:"default"},reviewSection:{width:"100%",height:"100%",padding:"2rem 1rem"},myReviewGroup:{display:"flex",alignItems:"flex-start",flexWrap:"nowrap",marginLeft:"1rem",marginRight:"1rem"},reviewEditorBox:{flexGrow:1,width:"100%"},reviewNo:{width:"100%",".mantine-TextInput-root, .mantine-TextInput-wrapper, .mantine-TextInput-input":{height:n?30:46},".mantine-TextInput-input":{"::placeholder":{fontSize:n?"0.8rem":"auto"}}},loader:{display:"flex",width:"100%",justifyContent:"center"}}}),ex=(0,r.k)((e,t)=>{let{smallScreen:n}=t;return{group:{display:"flex",flexWrap:"nowrap",alignItems:"flex-end"},editor:{flexGrow:1,cursor:"text",".mantine-RichTextEditor-content":{fontSize:n?e.fontSizes.xs:e.fontSizes.sm}},sendIcon:{marginBottom:n?"0.3rem":"0.5rem"}}});var ep=n(3461),eg=n(4980),ef=n(1284),ej=n(4991),ew=n(3237),ev=n(4777),eb=n(14),ek=n(1003),eC=n(297),ez=n(5500),ey=n(3184),eZ=n(4455),eN=n(7726),eI=n(4906);let eT=(0,r.k)((e,t)=>{let{smallScreen:n}=t;return{stack:{margin:"1rem 1rem"},reviewTypo:{lineHeight:1.2},spoiler:{".mantine-Spoiler-control":{marginTop:"0.5rem",color:e.colors.gray[4],"&:hover":{textDecoration:"none"}}},content:{lineHeight:1.5,"*":{marginBottom:"0px !important"}},viewMoreButton:{paddingTop:"0.3rem"},button:{"&:hover":{backgroundColor:e.colors.gray[1]},".mantine-Button-inner":{fontWeight:"normal"}},buttonPadding:{padding:"0rem 0.5rem"},marginLeft:{marginLeft:n?"2.9rem":"4rem"},myReviewGroup:{display:"flex",alignItems:"flex-start",flexWrap:"nowrap",margin:"1rem 0rem",marginLeft:"0.5rem"},reviewEditorBox:{flexGrow:1,width:"100%"},reviewNo:{width:"100%",".mantine-TextInput-root, .mantine-TextInput-wrapper, .mantine-TextInput-input":{height:n?30:46},".mantine-TextInput-input":{"::placeholder":{fontSize:n?"0.8rem":"auto"}}},loader:{display:"flex",width:"100%",justifyContent:"center"}}});async function eS(e,t,n){let{data:a}=await W.Z.post("".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/").concat(t,"/like"),{},{headers:{"Content-Type":"application/json",Authorization:"".concat(n)}});return a}async function eB(e,t,n){let{data:a}=await W.Z.delete("".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/").concat(t,"/like"),{headers:{"Content-Type":"application/json",Authorization:"".concat(n)}});return a}async function eL(e,t,n){let{data:a}=await W.Z.post("".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/").concat(t,"/dislike"),{},{headers:{"Content-Type":"application/json",Authorization:"".concat(n)}});return a}async function eA(e,t,n){let{data:a}=await W.Z.delete("".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/").concat(t,"/dislike"),{headers:{"Content-Type":"application/json",Authorization:"".concat(n)}});return a}var eR=n(8002),e_=n(4736),eP=n(2158),eG=n(471),eE=n(4075),eM=n(9801);let eH=(0,r.k)((e,t)=>{let{smallScreen:n}=t;return{stack:{marginTop:"0.2rem",marginBottom:"1rem"},reviewTypo:{lineHeight:1.2},spoiler:{".mantine-Spoiler-control":{marginTop:"0.5rem",color:e.colors.gray[4],"&:hover":{textDecoration:"none"}}},content:{lineHeight:1.5,"*":{marginBottom:"0px !important"}},viewMoreButton:{paddingTop:"0.3rem"},button:{"&:hover":{backgroundColor:e.colors.gray[1]},".mantine-Button-inner":{fontWeight:"normal"}},buttonPadding:{padding:"0rem 0.5rem"},dotButton:{height:25,borderRadius:5,"&:hover":{backgroundColor:e.colors.gray[1]}},menuItem:{padding:5},myReviewGroup:{display:"flex",alignItems:"flex-start",flexWrap:"nowrap",margin:"1rem 0rem",marginLeft:"0.5rem"},reviewEditorBox:{flexGrow:1,width:"100%"},reviewNo:{width:"100%",".mantine-TextInput-root, .mantine-TextInput-wrapper, .mantine-TextInput-input":{height:n?30:46},".mantine-TextInput-input":{"::placeholder":{fontSize:n?"0.8rem":"auto"}}},loader:{display:"flex",width:"100%",justifyContent:"center"}}});async function eK(e,t,n){try{await W.Z.delete("".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/").concat(t),{headers:{"Content-Type":"application/json",Authorization:n}})}catch(e){console.error(e)}}let eD=(0,o.createContext)({mutateAssetReviewMineComment:()=>{}});function eW(e){let{assetId:t,data:n}=e,r=(0,u.a)("(max-width: 765px)"),{classes:i,cx:s}=eH({smallScreen:r}),c=(0,k.rZ)(),{user:l,token:d}=(0,M.Z)(),{data:m,setSize:h,isLoading:x,mutate:p}=eh({assetId:t,reviewId:n.id}),{mutateAssetReview:g,mutateAssetReviewMine:f}=(0,o.useContext)(e3),[j,w]=(0,o.useState)(!1),[v,{toggle:C}]=(0,A.q)(!1),T=!!l;return(0,a.jsxs)(eD.Provider,{value:{mutateAssetReviewMineComment:p},children:[!j&&(0,a.jsxs)(z.K,{className:i.stack,spacing:"lg",children:[(0,a.jsxs)(y.Z,{position:"apart",children:[(0,a.jsx)(Z.x,{fz:r?14:18,fw:"bold",color:c.colors.blue[6],children:"내가 작성한 후기"}),(0,a.jsx)(Z.x,{fz:r?12:14,color:c.colors.gray[4],children:(0,eI.n)(n.createdAt)})]}),(0,a.jsx)(z.K,{spacing:0,children:(0,a.jsx)(et.l,{className:i.reviewTypo,children:(0,a.jsx)(eb.o,{className:i.spoiler,maxHeight:r?65.6:94.4,showLabel:"자세히 보기",hideLabel:"숨기기",children:(0,a.jsx)("div",{className:i.content,dangerouslySetInnerHTML:{__html:n.content}})})})}),(0,a.jsxs)(y.Z,{position:"apart",children:[(0,a.jsx)(I.z,{className:i.button,size:"xs",variant:"outline",color:"dark",leftIcon:(0,a.jsx)(eC.Z,{stroke:1.5,size:r?"1rem":"1.5rem"}),onClick:C,children:"답글"}),(0,a.jsxs)(y.Z,{spacing:"xs",children:[(0,a.jsx)(I.z,{className:s(i.button,r?i.buttonPadding:null),size:"xs",variant:"outline",color:"dark",onClick:()=>{n.like?eB(t,n.id,d).then(()=>{f(),g()}):eS(t,n.id,d).then(()=>{n.dislike?eA(t,n.id,d).then(()=>{f(),g()}):(f(),g())})},children:(0,a.jsxs)(y.Z,{spacing:"xs",children:[n.like?(0,a.jsx)(ez.Z,{stroke:1.5,size:r?"1rem":"1.5rem"}):(0,a.jsx)(ey.Z,{stroke:1.5,size:r?"1rem":"1.5rem"}),(0,a.jsx)(Z.x,{children:n.likeCount})]})}),(0,a.jsx)(I.z,{className:s(i.button,r?i.buttonPadding:null),size:"xs",variant:"outline",color:"dark",onClick:()=>{n.dislike?eA(t,n.id,d).then(()=>{f(),g()}):eL(t,n.id,d).then(()=>{n.like?eB(t,n.id,d).then(()=>{f(),g()}):(f(),g())})},children:(0,a.jsxs)(y.Z,{spacing:"xs",children:[n.dislike?(0,a.jsx)(eZ.Z,{stroke:1.5,size:r?"1rem":"1.5rem"}):(0,a.jsx)(eN.Z,{stroke:1.5,size:r?"1rem":"1.5rem"}),(0,a.jsx)(Z.x,{children:n.dislikeCount})]})}),(0,a.jsxs)(eR.v,{shadow:"md",width:120,position:"bottom-end",offset:10,children:[(0,a.jsx)(eR.v.Target,{children:(0,a.jsx)(e_.k,{className:i.dotButton,children:(0,a.jsx)(eP.Z,{stroke:1.5,size:r?"1rem":"1.5rem"})})}),(0,a.jsxs)(eR.v.Dropdown,{children:[(0,a.jsx)(eR.v.Item,{icon:(0,a.jsx)(eG.Z,{size:18,stroke:2}),className:i.menuItem,onClick:()=>{w(!0)},children:"수정하기"}),(0,a.jsx)(eR.v.Divider,{}),(0,a.jsx)(eR.v.Item,{icon:(0,a.jsx)(eE.Z,{size:18,stroke:2}),className:i.menuItem,onClick:()=>{eK(t,n.id,d).then(()=>{f(),g(),(0,E.c0)("후기 삭제 완료!","후기가 정상적으로 삭제되었습니다.")})},children:"삭제하기"})]})]})]})]}),(0,a.jsxs)(ek.U,{in:v,children:[(0,a.jsx)(ev.i,{}),(0,a.jsxs)(y.Z,{className:i.myReviewGroup,children:[(0,a.jsx)(N.q,{radius:"xl",size:r?30:46,src:"https://avatars.githubusercontent.com/u/52057157?v=4"}),(0,a.jsxs)(b.x,{className:i.reviewEditorBox,children:[T&&(0,a.jsx)(e2,{placeholder:"후기에 답글을 달아보세요.",assetId:t,reviewId:n.id,isInReviewMine:!0}),!T&&(0,a.jsx)(R.o,{className:i.reviewNo,placeholder:"로그인 후 답글을 달아보세요.",disabled:!0})]})]}),null==m?void 0:m.map(e=>e.data.data.map(e=>(0,a.jsx)(eY,{assetId:t,reviewId:n.id,data:e,isInReviewMine:!0}))),x&&(0,a.jsx)(b.x,{className:i.loader,children:(0,a.jsx)(ec.a,{variant:"dots"})})]})]}),j&&(0,a.jsx)(e2,{completePatch:()=>w(!1),placeholder:"도움이 되는 착한 후기를 남겨보세요.",assetId:t,content:n.content})]})}let eq=(0,r.k)((e,t)=>{let{smallScreen:n}=t;return{stack:{margin:"1rem 0rem",marginLeft:"0.5rem"},reviewTypo:{lineHeight:1.2},spoiler:{".mantine-Spoiler-control":{marginTop:"0.5rem",color:e.colors.gray[4],"&:hover":{textDecoration:"none"}}},content:{lineHeight:1.5,"*":{marginBottom:"0px !important"}},button:{"&:hover":{backgroundColor:e.colors.gray[1]},".mantine-Button-inner":{fontWeight:"normal"}},buttonPadding:{padding:"0rem 0.5rem"},dotButton:{height:25,borderRadius:5,"&:hover":{backgroundColor:e.colors.gray[1]}},menuItem:{padding:5},marginLeft:{marginLeft:n?"2.9rem":"4rem"}}});async function eF(e,t,n,a){let{data:o}=await W.Z.post("".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/").concat(t,"/comment/").concat(n,"/like"),{},{headers:{"Content-Type":"application/json",Authorization:"".concat(a)}});return o}async function eU(e,t,n,a){let{data:o}=await W.Z.delete("".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/").concat(t,"/comment/").concat(n,"/like"),{headers:{"Content-Type":"application/json",Authorization:"".concat(a)}});return o}async function eO(e,t,n,a){let{data:o}=await W.Z.post("".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/").concat(t,"/comment/").concat(n,"/dislike"),{},{headers:{"Content-Type":"application/json",Authorization:"".concat(a)}});return o}async function eV(e,t,n,a){let{data:o}=await W.Z.delete("".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/").concat(t,"/comment/").concat(n,"/dislike"),{headers:{"Content-Type":"application/json",Authorization:"".concat(a)}});return o}async function eX(e,t,n,a){try{await W.Z.delete("".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/").concat(t,"/comment/").concat(n),{headers:{"Content-Type":"application/json",Authorization:a}})}catch(e){console.error(e)}}function eY(e){let{assetId:t,reviewId:n,data:r,isInReviewMine:i}=e,s=(0,u.a)("(max-width: 765px)"),{classes:c,cx:l}=eq({smallScreen:s}),d=(0,k.rZ)(),{user:m,token:h}=(0,M.Z)(),{mutateAssetReviewComment:x}=(0,o.useContext)(eJ),{mutateAssetReviewMineComment:p}=(0,o.useContext)(eD),[g,f]=(0,o.useState)(!1);return(0,a.jsxs)(b.x,{children:[(0,a.jsx)(ev.i,{}),(0,a.jsxs)(z.K,{className:c.stack,spacing:"lg",children:[(0,a.jsxs)(y.Z,{position:"apart",align:"flex-start",children:[(0,a.jsxs)(y.Z,{align:"flex-end",children:[(0,a.jsx)(N.q,{radius:"xl",size:s?30:46,src:"https://avatars.githubusercontent.com/u/52057157?v=4"}),(0,a.jsxs)(z.K,{spacing:"0.2rem",children:[(0,a.jsx)(Z.x,{fz:s?14:18,children:r.author.name}),(0,a.jsx)(Z.x,{fz:s?12:14,color:d.colors.blue[4],children:r.author.description})]})]}),(0,a.jsx)(Z.x,{fz:s?12:14,color:d.colors.gray[4],children:(0,eI.n)(r.createdAt)})]}),!g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z.K,{className:c.marginLeft,spacing:0,children:(0,a.jsx)(et.l,{className:c.reviewTypo,children:(0,a.jsx)(eb.o,{className:c.spoiler,maxHeight:s?65.6:94.4,showLabel:"자세히 보기",hideLabel:"숨기기",children:(0,a.jsx)("div",{className:c.content,dangerouslySetInnerHTML:{__html:r.content}})})})}),(0,a.jsxs)(y.Z,{className:c.marginLeft,position:"right",spacing:"xs",children:[(0,a.jsx)(I.z,{className:l(c.button,s?c.buttonPadding:null),size:"xs",variant:"outline",color:"dark",onClick:()=>{r.like?eU(t,n,r.id,h).then(()=>{x(),i&&p()}):eF(t,n,r.id,h).then(()=>{r.dislike?eV(t,n,r.id,h).then(()=>{x(),i&&p()}):(x(),i&&p())})},children:(0,a.jsxs)(y.Z,{spacing:"xs",children:[r.like?(0,a.jsx)(ez.Z,{stroke:1.5,size:s?"1rem":"1.5rem"}):(0,a.jsx)(ey.Z,{stroke:1.5,size:s?"1rem":"1.5rem"}),(0,a.jsx)(Z.x,{children:r.likeCount})]})}),(0,a.jsx)(I.z,{className:l(c.button,s?c.buttonPadding:null),size:"xs",variant:"outline",color:"dark",onClick:()=>{r.dislike?eV(t,n,r.id,h).then(()=>{x(),i&&p()}):eO(t,n,r.id,h).then(()=>{r.like?eU(t,n,r.id,h).then(()=>{x(),i&&p()}):(x(),i&&p())})},children:(0,a.jsxs)(y.Z,{spacing:"xs",children:[r.dislike?(0,a.jsx)(eZ.Z,{stroke:1.5,size:s?"1rem":"1.5rem"}):(0,a.jsx)(eN.Z,{stroke:1.5,size:s?"1rem":"1.5rem"}),(0,a.jsx)(Z.x,{children:r.dislikeCount})]})}),(0,a.jsxs)(eR.v,{shadow:"md",width:120,position:"bottom-end",offset:10,children:[(0,a.jsx)(eR.v.Target,{children:(0,a.jsx)(e_.k,{className:c.dotButton,children:(0,a.jsx)(eP.Z,{stroke:1.5,size:s?"1rem":"1.5rem"})})}),(0,a.jsxs)(eR.v.Dropdown,{children:[r.author.email===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eR.v.Item,{icon:(0,a.jsx)(eG.Z,{size:18,stroke:2}),className:c.menuItem,onClick:()=>{f(!0)},children:"수정하기"}),(0,a.jsx)(eR.v.Divider,{}),(0,a.jsx)(eR.v.Item,{onClick:()=>{eX(t,n,r.id,h).then(()=>{x(),r.author.email===h&&p(),(0,E.c0)("댓글 삭제 완료!","댓글이 정상적으로 삭제되었습니다.")})},icon:(0,a.jsx)(eE.Z,{size:18,stroke:2}),className:c.menuItem,children:"삭제하기"})]}),r.author.email!==h&&(0,a.jsx)(eR.v.Item,{icon:(0,a.jsx)(eM.Z,{size:18,stroke:2}),className:c.menuItem,children:"신고하기"})]})]})]})]}),g&&(0,a.jsx)(b.x,{className:c.marginLeft,children:(0,a.jsx)(e2,{completePatch:()=>f(!1),placeholder:"도움이 되는 착한 후기를 남겨보세요.",assetId:t,reviewId:n,commentId:r.id,content:r.content,isInReviewMine:!0})})]})]})}let eJ=(0,o.createContext)({mutateAssetReviewComment:()=>{}});function eQ(e){let{assetId:t,data:n}=e,r=(0,u.a)("(max-width: 765px)"),{classes:i,cx:s}=eT({smallScreen:r}),c=(0,k.rZ)(),{token:l,user:d,openSignInModal:m}=(0,M.Z)(),{mutateAssetReview:h,mutateAssetReviewMine:x}=(0,o.useContext)(e3),{data:p,setSize:g,isLoading:f,mutate:j}=eh({assetId:t,reviewId:n.id}),[w,{toggle:v}]=(0,A.q)(!1),C=!!d;return(0,a.jsx)(eJ.Provider,{value:{mutateAssetReviewComment:j},children:(0,a.jsxs)(b.x,{children:[(0,a.jsx)(ev.i,{}),(0,a.jsxs)(z.K,{className:i.stack,spacing:"lg",children:[(0,a.jsxs)(y.Z,{position:"apart",align:"flex-start",children:[(0,a.jsxs)(y.Z,{align:"flex-end",children:[(0,a.jsx)(N.q,{radius:"xl",size:r?30:46,src:"https://avatars.githubusercontent.com/u/52057157?v=4"}),(0,a.jsxs)(z.K,{spacing:"0.2rem",children:[(0,a.jsx)(Z.x,{fz:r?14:18,children:n.author.name}),(0,a.jsx)(Z.x,{fz:r?12:14,color:c.colors.blue[4],children:n.author.description})]})]}),(0,a.jsx)(Z.x,{fz:r?12:14,color:c.colors.gray[4],children:(0,eI.n)(n.createdAt)})]}),(0,a.jsx)(z.K,{className:i.marginLeft,spacing:0,children:(0,a.jsx)(et.l,{className:i.reviewTypo,children:(0,a.jsx)(eb.o,{className:i.spoiler,maxHeight:r?65.6:94.4,showLabel:"자세히 보기",hideLabel:"숨기기",children:(0,a.jsx)("div",{className:i.content,dangerouslySetInnerHTML:{__html:n.content}})})})}),(0,a.jsxs)(y.Z,{className:i.marginLeft,position:"apart",children:[(0,a.jsx)(I.z,{className:i.button,size:"xs",variant:"outline",color:"dark",leftIcon:(0,a.jsx)(eC.Z,{stroke:1.5,size:r?"1rem":"1.5rem"}),onClick:v,children:"답글"}),(0,a.jsxs)(y.Z,{spacing:"xs",children:[(0,a.jsx)(I.z,{className:s(i.button,r?i.buttonPadding:null),size:"xs",variant:"outline",color:"dark",onClick:()=>{if(!d){m();return}n.like?eB(t,n.id,l).then(()=>{h(),n.author.email===l&&x()}):eS(t,n.id,l).then(()=>{n.dislike?eA(t,n.id,l).then(()=>{h(),n.author.email===l&&x()}):(h(),n.author.email===l&&x())})},children:(0,a.jsxs)(y.Z,{spacing:"xs",children:[n.like?(0,a.jsx)(ez.Z,{stroke:1.5,size:r?"1rem":"1.5rem"}):(0,a.jsx)(ey.Z,{stroke:1.5,size:r?"1rem":"1.5rem"}),(0,a.jsx)(Z.x,{children:n.likeCount})]})}),(0,a.jsx)(I.z,{className:s(i.button,r?i.buttonPadding:null),size:"xs",variant:"outline",color:"dark",onClick:()=>{if(!d){m();return}n.dislike?eA(t,n.id,l).then(()=>{h(),n.author.email===l&&x()}):eL(t,n.id,l).then(()=>{n.like?eB(t,n.id,l).then(()=>{h(),n.author.email===l&&x()}):(h(),n.author.email===l&&x())})},children:(0,a.jsxs)(y.Z,{spacing:"xs",children:[n.dislike?(0,a.jsx)(eZ.Z,{stroke:1.5,size:r?"1rem":"1.5rem"}):(0,a.jsx)(eN.Z,{stroke:1.5,size:r?"1rem":"1.5rem"}),(0,a.jsx)(Z.x,{children:n.dislikeCount})]})})]})]}),(0,a.jsxs)(ek.U,{in:w,className:i.marginLeft,children:[(0,a.jsx)(ev.i,{}),(0,a.jsxs)(y.Z,{className:i.myReviewGroup,children:[(0,a.jsx)(N.q,{radius:"xl",size:r?30:46,src:"https://avatars.githubusercontent.com/u/52057157?v=4"}),(0,a.jsxs)(b.x,{className:i.reviewEditorBox,children:[C&&(0,a.jsx)(e2,{placeholder:"후기에 답글을 달아보세요.",assetId:t,reviewId:n.id}),!C&&(0,a.jsx)(R.o,{className:i.reviewNo,placeholder:"게임을 플레이하고 후기에 답글을 달아보세요.",disabled:!0})]})]}),null==p?void 0:p.map(e=>e.data.data.map(e=>(0,a.jsx)(eY,{assetId:t,reviewId:n.id,data:e}))),f&&(0,a.jsx)(b.x,{className:i.loader,children:(0,a.jsx)(ec.a,{variant:"dots"})})]})]})]})})}async function e$(e){let{assetId:t,reviewId:n,commentId:a,data:o,token:r}=e,i="".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(t,"/review/").concat(n,"/comment/").concat(a);try{let e=await W.Z.patch(i,o,{headers:{"Content-Type":"application/json",Authorization:"".concat(r)}});return e.data}catch(e){throw e}}async function e0(e){let{assetId:t,data:n,token:a}=e,o="".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(t,"/review");try{let e=await W.Z.patch(o,n,{headers:{"Content-Type":"application/json",Authorization:"".concat(a)}});return e.data}catch(e){throw e}}async function e1(e,t,n,a){let{data:o}=await W.Z.post("".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(t,"/review/").concat(n,"/comment"),e,{headers:{"Content-Type":"application/json",Authorization:"".concat(a)}});return o}async function e5(e,t,n){let{data:a}=await W.Z.post("".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(t,"/review"),e,{headers:{"Content-Type":"application/json",Authorization:"".concat(n)}});return a}function e2(e){let{completePatch:t,placeholder:n,assetId:r,reviewId:i,commentId:s,content:c,isInReviewMine:l}=e,d=(0,k.rZ)(),m=(0,u.a)("(max-width: 765px)"),{classes:h}=ex({smallScreen:m}),{token:x,openSignInModal:p,user:g}=(0,M.Z)(),f=(0,ef.jE)({extensions:[ej.Z,ew.Z.configure({placeholder:n})],content:c||""}),{mutateAssetReview:j,mutateAssetReviewMine:w}=(0,o.useContext)(e3),{mutateAssetReviewComment:v}=(0,o.useContext)(eJ),{mutateAssetReviewMineComment:b}=(0,o.useContext)(eD),[C,z]=(0,o.useState)("");return(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),s&&i?e$({assetId:r,reviewId:i,commentId:s,data:{content:C,rating:0},token:x}).then(()=>{z(""),void 0!==t&&t(),j(),l&&w(),(0,E.c0)("댓글 수정 완료!","댓글이 정상적으로 수정되었습니다.")}):c?e0({assetId:r,data:{content:C,rating:0},token:x}).then(()=>{z(""),void 0!==t&&t(),j(),w(),(0,E.c0)("후기 수정 완료!","후기가 정상적으로 수정되었습니다.")}):i?e1({content:C},r,i,x).then(()=>{z(""),v(),l&&b(),(0,E.c0)("댓글 등록 완료!","댓글이 정상적으로 수정되었습니다.")}):e5({content:C,rating:5},r,x).then(()=>{z(""),j(),w(),(0,E.c0)("후기 등록 완료!","후기가 정상적으로 등록되었습니다.")})},children:(0,a.jsxs)(y.Z,{className:h.group,children:[(0,a.jsx)(eg.L,{className:h.editor,editor:f,onFocus:e=>{g||(p(),e.currentTarget.querySelector("div[contenteditable='true']").blur())},children:(0,a.jsx)(eg.L.Content,{})}),(0,a.jsx)(S.Z,{type:"submit",onClick:e=>{if(!g){p(),e.preventDefault();return}"<p></p>"===f.getHTML()?((0,E.c0)(null,"내용을 입력해 주세요."),e.preventDefault()):(z(f.getHTML()),f.commands.setContent(""))},children:(0,a.jsx)(ep.Z,{className:h.sendIcon,size:m?"1.5rem":"2rem",stroke:1,color:d.colors.gray[7]})})]})})}let e3=(0,o.createContext)({mutateAssetReview:()=>{},mutateAssetReviewMine:()=>{}});function e4(e){let{assetId:t}=e,n=(0,u.a)("(max-width: 765px)"),{classes:o,cx:r}=eu({smallScreen:n}),{user:i,token:s}=(0,M.Z)(),{data:c,mutate:l}=function(e){let{token:t}=(0,M.Z)(),n="".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/user"),a=(0,K.ZP)(n,e=>(0,D._)(e,t));return a}(t),{data:d,setSize:m,isLoading:h,mutate:x}=eh({assetId:t});return(0,a.jsx)(e3.Provider,{value:{mutateAssetReview:x,mutateAssetReviewMine:l},children:(0,a.jsxs)(z.K,{spacing:"xl",className:o.all,children:[(0,a.jsx)(Z.x,{fz:n?28:32,children:"후기"}),(0,a.jsx)(ea.Z,{className:o.reviewSection,bg:"white",children:(0,a.jsxs)(z.K,{spacing:"lg",children:[(0,a.jsxs)(y.Z,{className:o.myReviewGroup,children:[(0,a.jsx)(N.q,{radius:"xl",size:n?30:46,src:"https://avatars.githubusercontent.com/u/52057157?v=4"}),(0,a.jsx)(b.x,{className:o.reviewEditorBox,children:c?null===c.data?(0,a.jsx)(e2,{placeholder:"도움이 되는 착한 후기를 남겨보세요.",assetId:t||""}):(0,a.jsx)(eW,{assetId:t,data:c.data}):(0,a.jsx)(a.Fragment,{})})]}),null==d?void 0:d.map(e=>{var n;return null===(n=e.data.data)||void 0===n?void 0:n.map(e=>e.author.email!==s?(0,a.jsx)(eQ,{assetId:t,data:e}):null)}),h&&(0,a.jsx)(b.x,{className:o.loader,children:(0,a.jsx)(ec.a,{variant:"dots"})})]})})]})})}var e7=n(1163),e8=function(e){let{token:t}=(0,M.Z)(),n="".concat("http://ec2-43-207-85-73.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e),a=(0,K.ZP)(n,e=>(0,D._)(e,t));return a};let e6=(0,o.createContext)({mutateAsset:()=>{}}),e9=(0,o.createContext)({ontabClick:()=>{},ontabClickFast:()=>{}});var te=function(){let e=(0,o.useRef)(null),[t,n]=(0,o.useState)("info"),r=(0,e7.useRouter)(),i=r.query.id?r.query.id.toString():void 0,{data:s,mutate:c}=e8(i);return(0,a.jsx)(e6.Provider,{value:{mutateAsset:c},children:(0,a.jsx)(e9.Provider,{value:{ontabClick:()=>{var t;null===(t=e.current)||void 0===t||t.scrollIntoView({behavior:"smooth",block:"nearest"})},ontabClickFast:()=>{var t;null===(t=e.current)||void 0===t||t.scrollIntoView({behavior:"instant",block:"nearest"})}},children:s&&(0,a.jsxs)(v,{photoSection:(0,a.jsx)(j,{imgUrls:s.data.imgUrls}),summarySection:(0,a.jsx)(J,{asset:s.data}),anchorSection:(0,a.jsx)("div",{ref:e}),tabSection:(0,a.jsx)(ee,{activeTab:t,setActiveTab:n}),rightSection:(0,a.jsx)(es,{asset:s.data}),children:["info"===t&&(0,a.jsx)(eo,{asset:s.data}),"review"===t&&(0,a.jsx)(e4,{assetId:s.data.id})]})})})}},4906:function(e,t,n){"use strict";function a(e){let t=new Date,n=t.getTime()-new Date(e).getTime()-324e5,a=Math.floor(n/1e3),o=Math.floor(a/60),r=Math.floor(o/60),i=Math.floor(r/24),s=Math.floor(i/30);return a<5?"방금 전":a<60?"".concat(a,"초 전"):o<60?"".concat(o,"분 전"):r<24?"".concat(r,"시간 전"):i<30?"".concat(i,"일 전"):s<12?"".concat(s,"달 전"):"".concat(Math.floor(s/12),"년 전")}n.d(t,{n:function(){return a}})}},function(e){e.O(0,[911,436,411,559,316,774,888,179],function(){return e(e.s=3217)}),_N_E=e.O()}]);
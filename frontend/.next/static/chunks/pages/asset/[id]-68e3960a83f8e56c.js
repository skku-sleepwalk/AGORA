(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[543],{3217:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/asset/[id]",function(){return n(7975)}])},1576:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(5893),o=n(2445),r=n(1485);let i=(0,r.k)((e,t)=>{let{shadow:n,borderRadius:a}=t;return{cardContainer:{boxShadow:"0px 3px ".concat(n,"px rgba(0, 0, 0, 0.2)"),borderRadius:a,margin:"0"}}});var s=function(e){let{children:t,shadow:n=10,borderRadius:r=15,className:s,...c}=e,{classes:l,cx:d}=i({shadow:n,borderRadius:r});return(0,a.jsx)(o.W,{className:d(l.cardContainer,s),...c,children:t})}},7975:function(e,t,n){"use strict";n.r(t),n.d(t,{AssetContext:function(){return e7},AssetTabClickContext:function(){return e6},default:function(){return e9}});var a=n(5893),o=n(7294),r=n(1485);let i=(0,r.k)(e=>({backgroundImage:{display:"flex",alignItems:"center",textDecoration:"none","&:hover":{textDecoration:"none"}},imageContainer:{width:"100%",height:"100%",padding:0,borderRadius:"1rem",backgroundColor:e.colors.gray[2]},image:{height:"100%",".mantine-Image-imageWrapper, .mantine-Image-figure, .mantine-Image-image":{height:"100%"}},carousel:{width:"100%",height:"100%",".mantine-Carousel-root, .mantine-Carousel-container, .mantine-Carousel-viewport":{height:"100%"},".mantine-Carousel-control":{backgroundColor:"transparent",border:"none",boxShadow:"none"},".mantine-Carousel-indicator":{width:"2rem",height:"0.4rem",transition:"width 250ms ease","&[data-active]":{width:"3rem",backgroundColor:e.colors.blue[3]}},[e.fn.smallerThan(820)]:{".mantine-Carousel-indicators":{gap:"0.3rem"},".mantine-Carousel-indicator":{width:"1.3rem",height:"0.26rem","&[data-active]":{width:"2rem"}}},[e.fn.smallerThan(540)]:{".mantine-Carousel-indicators":{gap:"0.15rem"},".mantine-Carousel-indicator":{width:"0.65rem",height:"0.13rem","&[data-active]":{width:"1rem"}}}}}));var s=n(4472),c=n(1411),l=n(8553),d=n.n(l),m=n(8528),h=n(4065),u=n(1209),x=n(3865),p=n(2445),g=n(2870);function f(e){let{imgUrls:t}=e,{classes:n,cx:r}=i(),[l,f]=(0,o.useState)(null);(0,s.D)(l,200);let j=(0,o.useRef)(d()({delay:4e3})),[w]=(0,m.n)(null==t?void 0:t.map(e=>({src:e}))),v=(0,h.a)("(max-width: 820px)"),b=(0,h.a)("(max-width: 540px)"),k=w.map(e=>(0,a.jsx)(c.l.Slide,{children:(0,a.jsx)(p.W,{className:n.imageContainer,children:(0,a.jsx)(g.E,{className:n.image,width:"100%",height:"100%",radius:"lg",fit:"contain",src:e.src})})}));return(0,a.jsx)(c.l,{className:n.carousel,slideSize:"100%",slideGap:"md",loop:!0,draggable:!1,withIndicators:!0,previousControlIcon:(0,a.jsx)(u.Z,{color:"white",size:b?"1rem":v?"2rem":"3rem"}),nextControlIcon:(0,a.jsx)(x.Z,{color:"white",size:b?"1rem":v?"2rem":"3rem"}),getEmblaApi:f,plugins:[j.current],onMouseEnter:j.current.stop,onMouseLeave:j.current.reset,children:k})}let j=(0,r.k)(e=>({container:{display:"flex",flexWrap:"wrap",width:"100%"},topContainer:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",width:"100%",height:"auto",padding:40,paddingTop:60,gap:20},PhotoContainer:{position:"relative",margin:0,aspectRatio:"8 / 5",width:800},summaryContainer:{margin:0,width:430,height:500,flexGrow:1},tabBottomContainer:{position:"relative",width:"100%",height:"100%"},anchor:{position:"absolute",top:"-4.313rem"},tabContainer:{position:"sticky",top:"4.313rem",width:"100%",height:"3rem",zIndex:50},bottomContainer:{display:"flex",flexWrap:"nowrap",width:"100%",height:"100%",padding:40,gap:40},mainContainer_B:{flexGrow:1,flexShrink:0,width:700,margin:0},rightContainer_B:{position:"sticky",top:"9.75rem",flexShrink:0,width:"25rem",height:"37rem",margin:0},mainContainer_S:{flexGrow:1,margin:0},rightContainer_S:{display:"none"}}));var w=function(e){let{photoSection:t,summarySection:n,anchorSection:o,tabSection:r,children:i,rightSection:s}=e,{classes:c,cx:l}=j(),d=(0,h.a)("(max-width: 780px)");return(0,a.jsxs)("div",{className:c.container,children:[(0,a.jsxs)("div",{className:c.topContainer,children:[(0,a.jsx)("div",{className:c.PhotoContainer,children:t}),(0,a.jsx)("div",{className:c.summaryContainer,children:n})]}),(0,a.jsxs)("div",{className:c.tabBottomContainer,children:[(0,a.jsx)("div",{className:c.anchor,children:o}),(0,a.jsx)("div",{className:c.tabContainer,children:r}),(0,a.jsxs)("div",{className:c.bottomContainer,children:[(0,a.jsx)("div",{className:l(d?c.mainContainer_S:c.mainContainer_B),children:i}),(0,a.jsx)("div",{className:l(d?c.rightContainer_S:c.rightContainer_B),children:s})]})]})]})},v=n(7414),b=n(263),k=n(3951),C=n(7564),z=n(1232),y=n(5117),Z=n(9985),N=n(7841),I=n(3523),T=n(5938),S=n(434);let B=(0,r.k)(e=>({modal:{display:"flex",width:"21.875rem",".mantine-Modal-title":{marginLeft:"0.1rem",fontSize:"1.2rem"}},stack:{cursor:"default"},heartFilled:{marginRight:"0.2rem"},alignTop:{alignItems:"flex-start"},alignBottom:{alignItems:"flex-end"},grayText:{marginLeft:"0.5rem",color:e.colors.gray[6]},blueText:{position:"absolute",marginLeft:"6.5rem",color:e.colors.blue[4],textDecoration:"underLine","&:hover":{color:e.colors.blue[4],textDecoration:"underLine"}},followBadge:{width:"6rem",height:"2rem",padding:"0rem 0.3rem",".mantine-Badge-leftSection":{marginRight:"0.7rem"}},tagGroup:{maxHeight:"4.3rem",overflow:"hidden"},tagBox:{position:"relative",display:"flex",flexWrap:"wrap",justifyContent:"space-between",height:"4.3rem",margin:"0rem 0.1875rem",padding:0,backgroundColor:"#fcfcfe","&::after":{content:'""',flexGrow:100,height:"1.988rem"}},tag:{display:"flex",flexGrow:1,height:"1.8rem",margin:"0.1875rem 0.3125rem",paddingLeft:"0.5rem",paddingRight:"0.75rem",borderRadius:"0.25rem",justifyContent:"center",alignItems:"center",backgroundColor:e.colors.blue[1],color:e.colors.blue[6],fontSize:12,fontWeight:"bold"},addButton:{display:"flex",height:"1.8rem",margin:"0.1875rem 0.3125rem",paddingLeft:"0.5rem",paddingRight:"0.5rem",justifyContent:"center",alignItems:"center",backgroundColor:e.colors.blue[1],color:e.colors.blue[6],fontSize:16,"&:hover":{backgroundColor:e.colors.blue[2]}},addButton_A:{position:"absolute",top:"2.175rem",right:"0rem",boxShadow:"-7px 0px 4px #fcfcfe"},marginTop:{marginTop:"0.44rem"},marginBottom:{marginBottom:"0.44rem"},marginLeft:{marginLeft:"0.5rem",marginRight:"0.5rem"},sellButton:{width:"8rem",height:"4.7rem",flexGrow:1},passButton:{width:"7rem",height:"4.7rem"},downloadButton:{width:"100%",height:"55px"}}));var L=n(1759),A=n(61),R=n(5909),_=n(7283),P=n(9153),G=n(8233),M=n(8823);let E=(0,r.k)(e=>({multiSelectBox:{width:"100%",height:"18.75rem",padding:"0.5rem",border:"1px solid ".concat(e.colors.gray[4]),borderRadius:e.radius.sm,overflow:"hidden"},searchGroup:{display:"flex",margin:"0rem 0.3125rem",gap:"0.5rem"},search:{flexGrow:1,border:"0.0625rem solid ".concat(e.colors.gray[4]),borderRadius:e.radius.sm,".mantine-TextInput-input":{backgroundColor:"transparent",border:"none"}},tagBox:{display:"flex",flexWrap:"wrap",width:"100%",height:"100%",padding:0,margin:0,alignContent:"flex-start","&::after":{content:'""',flexGrow:100,height:"1.988rem"}},selectedGroup:{alignItems:"flex-end"},selectedBox:{display:"flex",flexWrap:"wrap",width:"20rem",minHeight:"2.5rem",maxHeight:"4.7rem",padding:"0.1rem 0.5rem",border:"1px solid ".concat(e.colors.gray[4]),borderRadius:e.radius.sm,flexGrow:1,overflow:"hidden",alignContent:"flex-start","&::after":{content:'""',flexGrow:100,height:"1.988rem"}},selectedTag:{display:"flex",flexGrow:1,height:"1.8rem",margin:"0.1875rem 0.3125rem",paddingLeft:"0.5rem",paddingRight:"0.3rem",borderRadius:"0.25rem",justifyContent:"center",alignItems:"center",backgroundColor:e.colors.blue[1],color:e.colors.blue[6],fontSize:12,fontWeight:"bold"},tagButton:{display:"flex",flexGrow:1,height:"1.8rem",margin:"0.1875rem 0.3125rem",paddingLeft:"0.5rem",paddingRight:"0.5rem",justifyContent:"center",alignItems:"center",border:"1px solid ".concat(e.colors.gray[4]),backgroundColor:"white",color:e.colors.gray[6],fontSize:12,"&:hover":{backgroundColor:e.colors.gray[2]}},tagButtonChecked:{border:"1px solid ".concat(e.colors.blue[1]," !important"),backgroundColor:e.colors.blue[1],color:e.colors.blue[6],fontSize:12,"&:hover":{border:"1px solid ".concat(e.colors.blue[2]),backgroundColor:e.colors.blue[2]}}}));var H=n(5591),K=n(7967),D=n(6154);async function W(e,t,n){let{data:a}=await D.Z.post("".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/tag"),t,{headers:{"Content-Type":"application/json",Authorization:"".concat(n)}});return a}async function q(e,t,n){try{await D.Z.delete("".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/tag/").concat(t),{headers:{"Content-Type":"application/json",Authorization:n}})}catch(e){console.error(e)}}function F(e){let{onClose:t,assetId:n}=e,{classes:r,cx:i}=E(),s=(0,b.rZ)(),{token:c}=(0,M.Z)(),{mutateAsset:l}=(0,o.useContext)(e7),{data:d}=function(e){let{token:t}=(0,M.Z)(),n="".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/tag"),a=(0,H.ZP)(n,e=>(0,K._)(e,t));return a}(n),m=d?d.data.map(e=>e.tag.name):[],[h,u]=(0,o.useState)([...m]);(0,o.useEffect)(()=>{u([...m])},[d]);let x=(0,o.useRef)(null),[p,g]=(0,o.useState)(""),{data:f}=function(e){let{token:t}=(0,M.Z)(),n="".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/game/tag/search?q=").concat(e),a=(0,H.ZP)(n,e=>(0,K._)(e,t));return a}(p),j=(0,R.P)(),w=null==f?void 0:f.data.map(e=>{let t=null==h?void 0:h.includes(e.name);return(0,a.jsx)(N.z,{className:i(r.tagButton,t&&r.tagButtonChecked),onClick:()=>{if(t||h.length<5){let n=[...h];t?h.forEach((t,a)=>{e.name===t&&(n.splice(a,1),u(n))}):(n.push(e.name),u(n)),(0,G.fd)()}else(0,G.x2)("태그는 5개까지 추가할 수 있습니다.",null)},children:e.name})}),k=h.map(e=>(0,a.jsx)(v.x,{className:r.selectedTag,children:(0,a.jsxs)(z.Z,{spacing:"0.3rem",children:[e,(0,a.jsx)(T.Z,{onClick:()=>{let t=[...h];h.forEach((n,a)=>{e===n&&(t.splice(a,1),u(t))}),(0,G.fd)()},children:(0,a.jsx)(_.Z,{stroke:2,size:"0.8rem",color:s.colors.blue[6]})})]})}));return(0,a.jsxs)(C.K,{spacing:"sm",children:[(0,a.jsx)(v.x,{className:r.multiSelectBox,children:(0,a.jsxs)(C.K,{spacing:"0.4rem",children:[(0,a.jsxs)(z.Z,{className:r.searchGroup,ref:j,children:[(0,a.jsx)(P.Z,{stroke:2,size:"1.2rem",color:s.colors.gray[6]}),(0,a.jsx)(A.o,{className:r.search,placeholder:"원하는 태그를 검색해서 추가해보세요.","data-autofocus":!0,ref:x,onKeyDown:e=>{var t;"Enter"===e.key?g(x.current?x.current.value:""):(null===(t=x.current)||void 0===t?void 0:t.value)===""&&g("")},rightSection:(0,a.jsx)(T.Z,{onClick:()=>{g("")},children:(0,a.jsx)(_.Z,{stroke:1.5,size:"1rem",color:s.colors.gray[5]})})})]}),(0,a.jsx)(v.x,{className:r.tagBox,children:w})]})}),(0,a.jsxs)(z.Z,{spacing:"xs",className:r.selectedGroup,children:[(0,a.jsx)(v.x,{className:r.selectedBox,children:k}),(0,a.jsx)(N.z,{variant:"light",color:"cyan",h:"2.5rem",onClick:()=>{d&&d.data.forEach(e=>{h.includes(e.tag.name)||(q(n,e.id,c),console.log("delete ".concat(e.tag.name)))}),h.forEach(e=>{m.includes(e)||(W(n,{tagName:e},c),console.log("post ".concat(e)))}),l(),t&&t()},children:"추가"})]})]})}async function U(e,t){let{data:n}=await D.Z.post("".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/like"),{},{headers:{"Content-Type":"application/json",Authorization:"".concat(t)}});return n}async function O(e,t){let{data:n}=await D.Z.delete("".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/like"),{headers:{"Content-Type":"application/json",Authorization:"".concat(t)}});return n}async function V(e,t){var n;let a=await D.Z.get("".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/download"),{responseType:"blob",headers:{Authorization:"".concat(t)}}),o=a.headers["content-disposition"],r="unknown";if(o){let e=o.match(/filename="(.+)"/);e&&e.length>1&&(r=decodeURIComponent(r=e[1]))}let i=window.URL.createObjectURL(new Blob([a.data])),s=document.createElement("a");s.href=i,s.setAttribute("download",r),document.body.appendChild(s),s.click(),null===(n=s.parentNode)||void 0===n||n.removeChild(s)}async function X(e,t){await D.Z.post("".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/purchase"),{},{headers:{Authorization:"".concat(t)}})}function Y(e){let{asset:t}=e,{classes:n,cx:r}=B(),[i,{open:s,close:c}]=(0,L.q)(!1),[l,d]=(0,o.useState)(!1),m=t.popularTags.map(e=>(0,a.jsx)(v.x,{className:n.tag,children:e.name})),h=(0,o.useRef)(null),[u,x]=(0,o.useState)(null),p=()=>h.current?h.current.scrollHeight>h.current.clientHeight:null;(0,o.useEffect)(()=>{x(p())},[]);let{user:f,token:j}=(0,M.Z)(),{mutateAsset:w}=(0,o.useContext)(e7),A=(0,b.rZ)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.u,{className:n.modal,opened:i,onClose:c,title:"태그 추가",centered:!0,children:(0,a.jsx)(F,{onClose:c,assetId:t.id})}),(0,a.jsxs)(C.K,{justify:"space-between",sx:{height:"100%"},children:[(0,a.jsxs)(C.K,{spacing:"1rem",className:r(n.stack,n.marginLeft),children:[(0,a.jsxs)(C.K,{spacing:"0.5rem",className:n.stack,children:[(0,a.jsxs)(z.Z,{position:"apart",children:[(0,a.jsx)(y.x,{fz:20,c:"gray",children:t.category.name}),(0,a.jsxs)(z.Z,{spacing:7,children:[(0,a.jsx)(T.Z,{onClick:()=>{t.like?O(t.id,j).then(()=>{w()}):U(t.id,j).then(()=>{w()})},children:t.like?(0,a.jsx)(S.Z,{size:"2rem",stroke:1,fill:A.colors.red[6]}):(0,a.jsx)(S.Z,{size:"2rem",stroke:1})}),t.likeCount]})]}),(0,a.jsx)(y.x,{fw:"bold",fz:32,children:t.title})]}),(0,a.jsxs)(C.K,{spacing:16,w:"100%",className:n.stack,children:[(0,a.jsxs)(z.Z,{spacing:8,children:[(0,a.jsx)(Z.q,{size:36,radius:"lg",src:"https://avatars.githubusercontent.com/u/52057157?v=4"}),(0,a.jsx)(y.x,{fz:18,children:t.author.name})]}),(0,a.jsxs)(z.Z,{spacing:6,children:[(0,a.jsx)(g.E,{src:"/images/token.svg",width:32,height:32}),(0,a.jsx)(y.x,{fz:24,fw:"bold",children:t.cost.isSale?t.cost.saledPrice:t.cost.defaultPrice})]})]})]}),(0,a.jsxs)(C.K,{spacing:"1rem",className:r(n.stack,n.marginLeft),children:[(0,a.jsx)(C.K,{spacing:17,children:(0,a.jsxs)(C.K,{spacing:7,children:[(0,a.jsx)(y.x,{className:r(n.marginTop,n.marginLeft),fw:"bold",children:"이 에셋의 인기 태그 :"}),(0,a.jsx)(v.x,{className:n.tagGroup,children:(0,a.jsxs)(v.x,{className:n.tagBox,ref:h,children:[m,(0,a.jsx)(N.z,{className:r(n.addButton,u?n.addButton_A:null),onClick:s,children:"+"})]})})]})}),(0,a.jsx)(N.z,{className:n.downloadButton,disabled:!!(!t.isPurchased&&(!f||f.token<(t.cost.isSale?t.cost.saledPrice:t.cost.defaultPrice))),onClick:()=>{t.isPurchased?V(t.id,j):X(t.id,j).then(()=>{w(),(0,G.c0)("결제 완료!","이제 에셋을 다운로드 할 수 있습니다.")})},children:(0,a.jsx)(I.M,{children:(0,a.jsx)(y.x,{fz:28,children:t.isPurchased?"다운로드":"구매하기"})})})]})]})]})}var J=n(1141);let Q=(0,r.k)(e=>({tabList:{position:"relative",boxSizing:"border-box",width:"100%",height:"3rem",borderBottom:"0.2rem solid #fcfcfe",paddingLeft:"2.3rem",backgroundColor:"#fcfcfe",boxShadow:"0px 6px 7px rgba(0, 0, 0, 0.1)"},tabItem_B:{width:"8rem",height:"3rem",fontSize:"1rem","&:hover":{backgroundColor:"transparent",borderBottom:"0.2rem solid #fcfcfe"}},tabItem_S:{width:"5rem",height:"3rem",fontSize:"0.8rem","&:hover":{backgroundColor:"transparent",borderBottom:"0.2rem solid #fcfcfe"}},tabItemActive:{color:"".concat(e.colors.blue[6]," !important"),borderBottom:"0.2rem solid ".concat(e.colors.blue[6]),"&:hover":{borderBottom:"0.2rem solid ".concat(e.colors.blue[6])}}}));function $(e){let{activeTab:t,setActiveTab:n}=e,{classes:r,cx:i}=Q(),s=(0,h.a)("(max-width: 780px)"),c=(0,o.useContext)(e6);return(0,a.jsx)(J.m,{value:t,onTabChange:n,children:(0,a.jsxs)(J.m.List,{className:r.tabList,position:"left",children:[(0,a.jsx)(J.m.Tab,{value:"info",className:i(s?r.tabItem_S:r.tabItem_B,"info"===t&&r.tabItemActive),onClick:c.ontabClickFast,children:"소개"}),(0,a.jsx)(J.m.Tab,{value:"review",className:i(s?r.tabItem_S:r.tabItem_B,"review"===t&&r.tabItemActive),onClick:c.ontabClickFast,children:"리뷰"})]})})}var ee=n(4397);let et=(0,r.k)(e=>({all:{cursor:"default"},infoSection:{width:"100%",height:"100%",padding:"2rem 1.5rem"},infoTypo:{lineHeight:1.2},content:{lineHeight:1.5,"*":{marginBottom:"0px !important"}},marginTop:{marginTop:"3rem"}}));var en=n(1576);function ea(e){let{asset:t}=e,n=(0,h.a)("(max-width: 765px)"),{classes:o,cx:r}=et();return(0,a.jsxs)(C.K,{spacing:"xl",className:o.all,children:[(0,a.jsx)(y.x,{fz:n?28:32,children:"에셋 설명"}),(0,a.jsx)(en.Z,{className:o.infoSection,bg:"white",children:(0,a.jsx)(ee.l,{className:o.infoTypo,children:(0,a.jsx)("div",{className:o.content,dangerouslySetInnerHTML:{__html:null==t?void 0:t.description}})})})]})}var eo=n(6564);let er=(0,r.k)(e=>({box:{display:"flex",flexWrap:"wrap",height:"100%",alignContent:"space-between",cursor:"default"},container:{width:"100%"},alignCenter:{display:"flex",alignItems:"center"},containerPadding:{padding:"1rem 0.3rem"},blueText:{color:e.colors.blue[6],"&:hover":{textDecorationLine:"underline"}},marginTop:{position:"relative",marginTop:"0.55rem"}}));function ei(e){let{asset:t,loading:n}=e,{classes:o,cx:r}=er(),i=t.createdAt,[s,c,l]=(null==i?void 0:i.split("-"))||[null,null,null],d="".concat(s,"년 ").concat(c,"월 ").concat(null==l?void 0:l.slice(0,2),"일");return(0,b.rZ)(),(0,a.jsx)(v.x,{className:o.box,children:(0,a.jsx)(en.Z,{className:r(o.container,o.alignCenter),children:(0,a.jsxs)(C.K,{className:r(o.containerPadding,o.container),spacing:20,children:[(0,a.jsxs)(z.Z,{position:"apart",className:o.container,children:[(0,a.jsx)(y.x,{size:"md",weight:700,children:"라이선스"}),(0,a.jsxs)(eo.z,{width:280,shadow:"sm",position:"bottom-end",children:[(0,a.jsx)(eo.z.Target,{children:(0,a.jsx)(y.x,{className:o.blueText,children:"CC BY"})}),(0,a.jsx)(eo.z.Dropdown,{children:(0,a.jsx)(y.x,{size:"sm",lh:1.3,children:"원작자를 표시하면 저작물을 수정, 재배포, 상업적 이용 등 어떤 방식으로든 사용할 수 있습니다."})})]})]}),(0,a.jsxs)(z.Z,{position:"apart",className:o.container,children:[(0,a.jsx)(y.x,{size:"md",weight:700,children:"파일 크기"}),(0,a.jsx)(y.x,{size:"md",children:"111.99 MB"})]}),(0,a.jsxs)(z.Z,{position:"apart",className:o.container,children:[(0,a.jsx)(y.x,{size:"md",weight:700,children:"최신 버전"}),(0,a.jsx)(y.x,{size:"md",children:"1.291"})]}),(0,a.jsxs)(z.Z,{position:"apart",className:o.container,children:[(0,a.jsx)(y.x,{size:"md",weight:700,children:"최신 릴리즈 날짜"}),(0,a.jsx)(y.x,{size:"md",children:d})]})]})})})}var es=n(966),ec=n(4593),el=n(7334);let ed=(e,t,n,a)=>{if(t&&null===t.data.cursor.afterCursor)return null;let o="";return(o=0===e?"":(0,el.stringify)({afterCursor:null==t?void 0:t.data.cursor.afterCursor}),void 0===a)?""==o?"".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(n,"/review"):"".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(n,"/review?").concat(o):""==o?"".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(n,"/review/").concat(a,"/comment"):"".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(n,"/review/").concat(a,"/comment?").concat(o)};function em(e){var t,n,a,o,r,i,s;let{assetId:c,reviewId:l}=e,{token:d}=(0,M.Z)(),m=(0,ec.ZP)((e,t)=>ed(e,t,c,l),e=>(0,K._)(e,d)),h=(null===(t=null===(n=m.data)||void 0===n?void 0:null===(a=n[m.data.length-1])||void 0===a?void 0:a.data.cursor)||void 0===t?void 0:t.afterCursor)===null,u=(null===(o=m.data)||void 0===o?void 0:null===(r=o[0])||void 0===r?void 0:null===(i=r.data)||void 0===i?void 0:null===(s=i.data)||void 0===s?void 0:s.length)===0;return{...m,isLast:h,isEmpty:u}}let eh=(0,r.k)((e,t)=>{let{smallScreen:n}=t;return{all:{cursor:"default"},reviewSection:{width:"100%",height:"100%",padding:"2rem 1rem"},myReviewGroup:{display:"flex",alignItems:"flex-start",flexWrap:"nowrap",marginLeft:"1rem",marginRight:"1rem"},reviewEditorBox:{flexGrow:1,width:"100%"},reviewNo:{width:"100%",".mantine-TextInput-root, .mantine-TextInput-wrapper, .mantine-TextInput-input":{height:n?30:46},".mantine-TextInput-input":{"::placeholder":{fontSize:n?"0.8rem":"auto"}}},loader:{display:"flex",width:"100%",justifyContent:"center"}}}),eu=(0,r.k)((e,t)=>{let{smallScreen:n}=t;return{group:{display:"flex",flexWrap:"nowrap",alignItems:"flex-end"},editor:{flexGrow:1,cursor:"text",".mantine-RichTextEditor-content":{fontSize:n?e.fontSizes.xs:e.fontSizes.sm}},sendIcon:{marginBottom:n?"0.3rem":"0.5rem"}}});var ex=n(3461),ep=n(4980),eg=n(1284),ef=n(4991),ej=n(3237),ew=n(4777),ev=n(14),eb=n(1003),ek=n(297),eC=n(5500),ez=n(3184),ey=n(4455),eZ=n(7726),eN=n(4906);let eI=(0,r.k)((e,t)=>{let{smallScreen:n}=t;return{stack:{margin:"1rem 1rem"},reviewTypo:{lineHeight:1.2},spoiler:{".mantine-Spoiler-control":{marginTop:"0.5rem",color:e.colors.gray[4],"&:hover":{textDecoration:"none"}}},content:{lineHeight:1.5,"*":{marginBottom:"0px !important"}},viewMoreButton:{paddingTop:"0.3rem"},button:{"&:hover":{backgroundColor:e.colors.gray[1]},".mantine-Button-inner":{fontWeight:"normal"}},buttonPadding:{padding:"0rem 0.5rem"},marginLeft:{marginLeft:n?"2.9rem":"4rem"},myReviewGroup:{display:"flex",alignItems:"flex-start",flexWrap:"nowrap",margin:"1rem 0rem",marginLeft:"0.5rem"},reviewEditorBox:{flexGrow:1,width:"100%"},reviewNo:{width:"100%",".mantine-TextInput-root, .mantine-TextInput-wrapper, .mantine-TextInput-input":{height:n?30:46},".mantine-TextInput-input":{"::placeholder":{fontSize:n?"0.8rem":"auto"}}},loader:{display:"flex",width:"100%",justifyContent:"center"}}});async function eT(e,t,n){let{data:a}=await D.Z.post("".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/").concat(t,"/like"),{},{headers:{"Content-Type":"application/json",Authorization:"".concat(n)}});return a}async function eS(e,t,n){let{data:a}=await D.Z.delete("".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/").concat(t,"/like"),{headers:{"Content-Type":"application/json",Authorization:"".concat(n)}});return a}async function eB(e,t,n){let{data:a}=await D.Z.post("".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/").concat(t,"/dislike"),{},{headers:{"Content-Type":"application/json",Authorization:"".concat(n)}});return a}async function eL(e,t,n){let{data:a}=await D.Z.delete("".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/").concat(t,"/dislike"),{headers:{"Content-Type":"application/json",Authorization:"".concat(n)}});return a}var eA=n(8002),eR=n(4736),e_=n(2158),eP=n(471),eG=n(4075),eM=n(9801);let eE=(0,r.k)((e,t)=>{let{smallScreen:n}=t;return{stack:{marginTop:"0.2rem",marginBottom:"1rem"},reviewTypo:{lineHeight:1.2},spoiler:{".mantine-Spoiler-control":{marginTop:"0.5rem",color:e.colors.gray[4],"&:hover":{textDecoration:"none"}}},content:{lineHeight:1.5,"*":{marginBottom:"0px !important"}},viewMoreButton:{paddingTop:"0.3rem"},button:{"&:hover":{backgroundColor:e.colors.gray[1]},".mantine-Button-inner":{fontWeight:"normal"}},buttonPadding:{padding:"0rem 0.5rem"},dotButton:{height:25,borderRadius:5,"&:hover":{backgroundColor:e.colors.gray[1]}},menuItem:{padding:5},myReviewGroup:{display:"flex",alignItems:"flex-start",flexWrap:"nowrap",margin:"1rem 0rem",marginLeft:"0.5rem"},reviewEditorBox:{flexGrow:1,width:"100%"},reviewNo:{width:"100%",".mantine-TextInput-root, .mantine-TextInput-wrapper, .mantine-TextInput-input":{height:n?30:46},".mantine-TextInput-input":{"::placeholder":{fontSize:n?"0.8rem":"auto"}}},loader:{display:"flex",width:"100%",justifyContent:"center"}}});async function eH(e,t,n){try{await D.Z.delete("".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/").concat(t),{headers:{"Content-Type":"application/json",Authorization:n}})}catch(e){console.error(e)}}let eK=(0,o.createContext)({mutateAssetReviewMineComment:()=>{}});function eD(e){let{assetId:t,data:n}=e,r=(0,h.a)("(max-width: 765px)"),{classes:i,cx:s}=eE({smallScreen:r}),c=(0,b.rZ)(),{user:l,token:d}=(0,M.Z)(),{data:m,setSize:u,isLoading:x,mutate:p}=em({assetId:t,reviewId:n.id}),{mutateAssetReview:g,mutateAssetReviewMine:f}=(0,o.useContext)(e5),[j,w]=(0,o.useState)(!1),[k,{toggle:I}]=(0,L.q)(!1),T=!!l;return(0,a.jsxs)(eK.Provider,{value:{mutateAssetReviewMineComment:p},children:[!j&&(0,a.jsxs)(C.K,{className:i.stack,spacing:"lg",children:[(0,a.jsxs)(z.Z,{position:"apart",children:[(0,a.jsx)(y.x,{fz:r?14:18,fw:"bold",color:c.colors.blue[6],children:"내가 작성한 후기"}),(0,a.jsx)(y.x,{fz:r?12:14,color:c.colors.gray[4],children:(0,eN.n)(n.createdAt)})]}),(0,a.jsx)(C.K,{spacing:0,children:(0,a.jsx)(ee.l,{className:i.reviewTypo,children:(0,a.jsx)(ev.o,{className:i.spoiler,maxHeight:r?65.6:94.4,showLabel:"자세히 보기",hideLabel:"숨기기",children:(0,a.jsx)("div",{className:i.content,dangerouslySetInnerHTML:{__html:n.content}})})})}),(0,a.jsxs)(z.Z,{position:"apart",children:[(0,a.jsx)(N.z,{className:i.button,size:"xs",variant:"outline",color:"dark",leftIcon:(0,a.jsx)(ek.Z,{stroke:1.5,size:r?"1rem":"1.5rem"}),onClick:I,children:"답글"}),(0,a.jsxs)(z.Z,{spacing:"xs",children:[(0,a.jsx)(N.z,{className:s(i.button,r?i.buttonPadding:null),size:"xs",variant:"outline",color:"dark",onClick:()=>{n.like?eS(t,n.id,d).then(()=>{f(),g()}):eT(t,n.id,d).then(()=>{n.dislike?eL(t,n.id,d).then(()=>{f(),g()}):(f(),g())})},children:(0,a.jsxs)(z.Z,{spacing:"xs",children:[n.like?(0,a.jsx)(eC.Z,{stroke:1.5,size:r?"1rem":"1.5rem"}):(0,a.jsx)(ez.Z,{stroke:1.5,size:r?"1rem":"1.5rem"}),(0,a.jsx)(y.x,{children:n.likeCount})]})}),(0,a.jsx)(N.z,{className:s(i.button,r?i.buttonPadding:null),size:"xs",variant:"outline",color:"dark",onClick:()=>{n.dislike?eL(t,n.id,d).then(()=>{f(),g()}):eB(t,n.id,d).then(()=>{n.like?eS(t,n.id,d).then(()=>{f(),g()}):(f(),g())})},children:(0,a.jsxs)(z.Z,{spacing:"xs",children:[n.dislike?(0,a.jsx)(ey.Z,{stroke:1.5,size:r?"1rem":"1.5rem"}):(0,a.jsx)(eZ.Z,{stroke:1.5,size:r?"1rem":"1.5rem"}),(0,a.jsx)(y.x,{children:n.dislikeCount})]})}),(0,a.jsxs)(eA.v,{shadow:"md",width:120,position:"bottom-end",offset:10,children:[(0,a.jsx)(eA.v.Target,{children:(0,a.jsx)(eR.k,{className:i.dotButton,children:(0,a.jsx)(e_.Z,{stroke:1.5,size:r?"1rem":"1.5rem"})})}),(0,a.jsxs)(eA.v.Dropdown,{children:[(0,a.jsx)(eA.v.Item,{icon:(0,a.jsx)(eP.Z,{size:18,stroke:2}),className:i.menuItem,onClick:()=>{w(!0)},children:"수정하기"}),(0,a.jsx)(eA.v.Divider,{}),(0,a.jsx)(eA.v.Item,{icon:(0,a.jsx)(eG.Z,{size:18,stroke:2}),className:i.menuItem,onClick:()=>{eH(t,n.id,d).then(()=>{f(),g(),(0,G.c0)("후기 삭제 완료!","후기가 정상적으로 삭제되었습니다.")})},children:"삭제하기"})]})]})]})]}),(0,a.jsxs)(eb.U,{in:k,children:[(0,a.jsx)(ew.i,{}),(0,a.jsxs)(z.Z,{className:i.myReviewGroup,children:[(0,a.jsx)(Z.q,{radius:"xl",size:r?30:46,src:"https://avatars.githubusercontent.com/u/52057157?v=4"}),(0,a.jsxs)(v.x,{className:i.reviewEditorBox,children:[T&&(0,a.jsx)(e2,{placeholder:"후기에 답글을 달아보세요.",assetId:t,reviewId:n.id,isInReviewMine:!0}),!T&&(0,a.jsx)(A.o,{className:i.reviewNo,placeholder:"로그인 후 답글을 달아보세요.",disabled:!0})]})]}),null==m?void 0:m.map(e=>e.data.data.map(e=>(0,a.jsx)(eX,{assetId:t,reviewId:n.id,data:e,isInReviewMine:!0}))),x&&(0,a.jsx)(v.x,{className:i.loader,children:(0,a.jsx)(es.a,{variant:"dots"})})]})]}),j&&(0,a.jsx)(e2,{completePatch:()=>w(!1),placeholder:"도움이 되는 착한 후기를 남겨보세요.",assetId:t,content:n.content})]})}let eW=(0,r.k)((e,t)=>{let{smallScreen:n}=t;return{stack:{margin:"1rem 0rem",marginLeft:"0.5rem"},reviewTypo:{lineHeight:1.2},spoiler:{".mantine-Spoiler-control":{marginTop:"0.5rem",color:e.colors.gray[4],"&:hover":{textDecoration:"none"}}},content:{lineHeight:1.5,"*":{marginBottom:"0px !important"}},button:{"&:hover":{backgroundColor:e.colors.gray[1]},".mantine-Button-inner":{fontWeight:"normal"}},buttonPadding:{padding:"0rem 0.5rem"},dotButton:{height:25,borderRadius:5,"&:hover":{backgroundColor:e.colors.gray[1]}},menuItem:{padding:5},marginLeft:{marginLeft:n?"2.9rem":"4rem"}}});async function eq(e,t,n,a){let{data:o}=await D.Z.post("".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/").concat(t,"/comment/").concat(n,"/like"),{},{headers:{"Content-Type":"application/json",Authorization:"".concat(a)}});return o}async function eF(e,t,n,a){let{data:o}=await D.Z.delete("".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/").concat(t,"/comment/").concat(n,"/like"),{headers:{"Content-Type":"application/json",Authorization:"".concat(a)}});return o}async function eU(e,t,n,a){let{data:o}=await D.Z.post("".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/").concat(t,"/comment/").concat(n,"/dislike"),{},{headers:{"Content-Type":"application/json",Authorization:"".concat(a)}});return o}async function eO(e,t,n,a){let{data:o}=await D.Z.delete("".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/").concat(t,"/comment/").concat(n,"/dislike"),{headers:{"Content-Type":"application/json",Authorization:"".concat(a)}});return o}async function eV(e,t,n,a){try{await D.Z.delete("".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/").concat(t,"/comment/").concat(n),{headers:{"Content-Type":"application/json",Authorization:a}})}catch(e){console.error(e)}}function eX(e){let{assetId:t,reviewId:n,data:r,isInReviewMine:i}=e,s=(0,h.a)("(max-width: 765px)"),{classes:c,cx:l}=eW({smallScreen:s}),d=(0,b.rZ)(),{user:m,token:u}=(0,M.Z)(),{mutateAssetReviewComment:x}=(0,o.useContext)(eY),{mutateAssetReviewMineComment:p}=(0,o.useContext)(eK),[g,f]=(0,o.useState)(!1);return(0,a.jsxs)(v.x,{children:[(0,a.jsx)(ew.i,{}),(0,a.jsxs)(C.K,{className:c.stack,spacing:"lg",children:[(0,a.jsxs)(z.Z,{position:"apart",align:"flex-start",children:[(0,a.jsxs)(z.Z,{align:"flex-end",children:[(0,a.jsx)(Z.q,{radius:"xl",size:s?30:46,src:"https://avatars.githubusercontent.com/u/52057157?v=4"}),(0,a.jsxs)(C.K,{spacing:"0.2rem",children:[(0,a.jsx)(y.x,{fz:s?14:18,children:r.author.name}),(0,a.jsx)(y.x,{fz:s?12:14,color:d.colors.blue[4],children:r.author.description})]})]}),(0,a.jsx)(y.x,{fz:s?12:14,color:d.colors.gray[4],children:(0,eN.n)(r.createdAt)})]}),!g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.K,{className:c.marginLeft,spacing:0,children:(0,a.jsx)(ee.l,{className:c.reviewTypo,children:(0,a.jsx)(ev.o,{className:c.spoiler,maxHeight:s?65.6:94.4,showLabel:"자세히 보기",hideLabel:"숨기기",children:(0,a.jsx)("div",{className:c.content,dangerouslySetInnerHTML:{__html:r.content}})})})}),(0,a.jsxs)(z.Z,{className:c.marginLeft,position:"right",spacing:"xs",children:[(0,a.jsx)(N.z,{className:l(c.button,s?c.buttonPadding:null),size:"xs",variant:"outline",color:"dark",onClick:()=>{r.like?eF(t,n,r.id,u).then(()=>{x(),i&&p()}):eq(t,n,r.id,u).then(()=>{r.dislike?eO(t,n,r.id,u).then(()=>{x(),i&&p()}):(x(),i&&p())})},children:(0,a.jsxs)(z.Z,{spacing:"xs",children:[r.like?(0,a.jsx)(eC.Z,{stroke:1.5,size:s?"1rem":"1.5rem"}):(0,a.jsx)(ez.Z,{stroke:1.5,size:s?"1rem":"1.5rem"}),(0,a.jsx)(y.x,{children:r.likeCount})]})}),(0,a.jsx)(N.z,{className:l(c.button,s?c.buttonPadding:null),size:"xs",variant:"outline",color:"dark",onClick:()=>{r.dislike?eO(t,n,r.id,u).then(()=>{x(),i&&p()}):eU(t,n,r.id,u).then(()=>{r.like?eF(t,n,r.id,u).then(()=>{x(),i&&p()}):(x(),i&&p())})},children:(0,a.jsxs)(z.Z,{spacing:"xs",children:[r.dislike?(0,a.jsx)(ey.Z,{stroke:1.5,size:s?"1rem":"1.5rem"}):(0,a.jsx)(eZ.Z,{stroke:1.5,size:s?"1rem":"1.5rem"}),(0,a.jsx)(y.x,{children:r.dislikeCount})]})}),(0,a.jsxs)(eA.v,{shadow:"md",width:120,position:"bottom-end",offset:10,children:[(0,a.jsx)(eA.v.Target,{children:(0,a.jsx)(eR.k,{className:c.dotButton,children:(0,a.jsx)(e_.Z,{stroke:1.5,size:s?"1rem":"1.5rem"})})}),(0,a.jsxs)(eA.v.Dropdown,{children:[r.author.email===u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eA.v.Item,{icon:(0,a.jsx)(eP.Z,{size:18,stroke:2}),className:c.menuItem,onClick:()=>{f(!0)},children:"수정하기"}),(0,a.jsx)(eA.v.Divider,{}),(0,a.jsx)(eA.v.Item,{onClick:()=>{eV(t,n,r.id,u).then(()=>{x(),r.author.email===u&&p(),(0,G.c0)("댓글 삭제 완료!","댓글이 정상적으로 삭제되었습니다.")})},icon:(0,a.jsx)(eG.Z,{size:18,stroke:2}),className:c.menuItem,children:"삭제하기"})]}),r.author.email!==u&&(0,a.jsx)(eA.v.Item,{icon:(0,a.jsx)(eM.Z,{size:18,stroke:2}),className:c.menuItem,children:"신고하기"})]})]})]})]}),g&&(0,a.jsx)(v.x,{className:c.marginLeft,children:(0,a.jsx)(e2,{completePatch:()=>f(!1),placeholder:"도움이 되는 착한 후기를 남겨보세요.",assetId:t,reviewId:n,commentId:r.id,content:r.content,isInReviewMine:!0})})]})]})}let eY=(0,o.createContext)({mutateAssetReviewComment:()=>{}});function eJ(e){let{assetId:t,data:n}=e,r=(0,h.a)("(max-width: 765px)"),{classes:i,cx:s}=eI({smallScreen:r}),c=(0,b.rZ)(),{token:l,user:d,openSignInModal:m}=(0,M.Z)(),{mutateAssetReview:u,mutateAssetReviewMine:x}=(0,o.useContext)(e5),{data:p,setSize:g,isLoading:f,mutate:j}=em({assetId:t,reviewId:n.id}),[w,{toggle:k}]=(0,L.q)(!1),I=!!d;return(0,a.jsx)(eY.Provider,{value:{mutateAssetReviewComment:j},children:(0,a.jsxs)(v.x,{children:[(0,a.jsx)(ew.i,{}),(0,a.jsxs)(C.K,{className:i.stack,spacing:"lg",children:[(0,a.jsxs)(z.Z,{position:"apart",align:"flex-start",children:[(0,a.jsxs)(z.Z,{align:"flex-end",children:[(0,a.jsx)(Z.q,{radius:"xl",size:r?30:46,src:"https://avatars.githubusercontent.com/u/52057157?v=4"}),(0,a.jsxs)(C.K,{spacing:"0.2rem",children:[(0,a.jsx)(y.x,{fz:r?14:18,children:n.author.name}),(0,a.jsx)(y.x,{fz:r?12:14,color:c.colors.blue[4],children:n.author.description})]})]}),(0,a.jsx)(y.x,{fz:r?12:14,color:c.colors.gray[4],children:(0,eN.n)(n.createdAt)})]}),(0,a.jsx)(C.K,{className:i.marginLeft,spacing:0,children:(0,a.jsx)(ee.l,{className:i.reviewTypo,children:(0,a.jsx)(ev.o,{className:i.spoiler,maxHeight:r?65.6:94.4,showLabel:"자세히 보기",hideLabel:"숨기기",children:(0,a.jsx)("div",{className:i.content,dangerouslySetInnerHTML:{__html:n.content}})})})}),(0,a.jsxs)(z.Z,{className:i.marginLeft,position:"apart",children:[(0,a.jsx)(N.z,{className:i.button,size:"xs",variant:"outline",color:"dark",leftIcon:(0,a.jsx)(ek.Z,{stroke:1.5,size:r?"1rem":"1.5rem"}),onClick:k,children:"답글"}),(0,a.jsxs)(z.Z,{spacing:"xs",children:[(0,a.jsx)(N.z,{className:s(i.button,r?i.buttonPadding:null),size:"xs",variant:"outline",color:"dark",onClick:()=>{if(!d){m();return}n.like?eS(t,n.id,l).then(()=>{u(),n.author.email===l&&x()}):eT(t,n.id,l).then(()=>{n.dislike?eL(t,n.id,l).then(()=>{u(),n.author.email===l&&x()}):(u(),n.author.email===l&&x())})},children:(0,a.jsxs)(z.Z,{spacing:"xs",children:[n.like?(0,a.jsx)(eC.Z,{stroke:1.5,size:r?"1rem":"1.5rem"}):(0,a.jsx)(ez.Z,{stroke:1.5,size:r?"1rem":"1.5rem"}),(0,a.jsx)(y.x,{children:n.likeCount})]})}),(0,a.jsx)(N.z,{className:s(i.button,r?i.buttonPadding:null),size:"xs",variant:"outline",color:"dark",onClick:()=>{if(!d){m();return}n.dislike?eL(t,n.id,l).then(()=>{u(),n.author.email===l&&x()}):eB(t,n.id,l).then(()=>{n.like?eS(t,n.id,l).then(()=>{u(),n.author.email===l&&x()}):(u(),n.author.email===l&&x())})},children:(0,a.jsxs)(z.Z,{spacing:"xs",children:[n.dislike?(0,a.jsx)(ey.Z,{stroke:1.5,size:r?"1rem":"1.5rem"}):(0,a.jsx)(eZ.Z,{stroke:1.5,size:r?"1rem":"1.5rem"}),(0,a.jsx)(y.x,{children:n.dislikeCount})]})})]})]}),(0,a.jsxs)(eb.U,{in:w,className:i.marginLeft,children:[(0,a.jsx)(ew.i,{}),(0,a.jsxs)(z.Z,{className:i.myReviewGroup,children:[(0,a.jsx)(Z.q,{radius:"xl",size:r?30:46,src:"https://avatars.githubusercontent.com/u/52057157?v=4"}),(0,a.jsxs)(v.x,{className:i.reviewEditorBox,children:[I&&(0,a.jsx)(e2,{placeholder:"후기에 답글을 달아보세요.",assetId:t,reviewId:n.id}),!I&&(0,a.jsx)(A.o,{className:i.reviewNo,placeholder:"게임을 플레이하고 후기에 답글을 달아보세요.",disabled:!0})]})]}),null==p?void 0:p.map(e=>e.data.data.map(e=>(0,a.jsx)(eX,{assetId:t,reviewId:n.id,data:e}))),f&&(0,a.jsx)(v.x,{className:i.loader,children:(0,a.jsx)(es.a,{variant:"dots"})})]})]})]})})}async function eQ(e){let{assetId:t,reviewId:n,commentId:a,data:o,token:r}=e,i="".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(t,"/review/").concat(n,"/comment/").concat(a);try{let e=await D.Z.patch(i,o,{headers:{"Content-Type":"application/json",Authorization:"".concat(r)}});return e.data}catch(e){throw e}}async function e$(e){let{assetId:t,data:n,token:a}=e,o="".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(t,"/review");try{let e=await D.Z.patch(o,n,{headers:{"Content-Type":"application/json",Authorization:"".concat(a)}});return e.data}catch(e){throw e}}async function e0(e,t,n,a){let{data:o}=await D.Z.post("".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(t,"/review/").concat(n,"/comment"),e,{headers:{"Content-Type":"application/json",Authorization:"".concat(a)}});return o}async function e1(e,t,n){let{data:a}=await D.Z.post("".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(t,"/review"),e,{headers:{"Content-Type":"application/json",Authorization:"".concat(n)}});return a}function e2(e){let{completePatch:t,placeholder:n,assetId:r,reviewId:i,commentId:s,content:c,isInReviewMine:l}=e,d=(0,b.rZ)(),m=(0,h.a)("(max-width: 765px)"),{classes:u}=eu({smallScreen:m}),{token:x,openSignInModal:p,user:g}=(0,M.Z)(),f=(0,eg.jE)({extensions:[ef.Z,ej.Z.configure({placeholder:n})],content:c||""}),{mutateAssetReview:j,mutateAssetReviewMine:w}=(0,o.useContext)(e5),{mutateAssetReviewComment:v}=(0,o.useContext)(eY),{mutateAssetReviewMineComment:k}=(0,o.useContext)(eK),[C,y]=(0,o.useState)("");return(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),s&&i?eQ({assetId:r,reviewId:i,commentId:s,data:{content:C,rating:0},token:x}).then(()=>{y(""),void 0!==t&&t(),j(),l&&w(),(0,G.c0)("댓글 수정 완료!","댓글이 정상적으로 수정되었습니다.")}):c?e$({assetId:r,data:{content:C,rating:0},token:x}).then(()=>{y(""),void 0!==t&&t(),j(),w(),(0,G.c0)("후기 수정 완료!","후기가 정상적으로 수정되었습니다.")}):i?e0({content:C},r,i,x).then(()=>{y(""),v(),l&&k(),(0,G.c0)("댓글 등록 완료!","댓글이 정상적으로 수정되었습니다.")}):e1({content:C,rating:5},r,x).then(()=>{y(""),j(),w(),(0,G.c0)("후기 등록 완료!","후기가 정상적으로 등록되었습니다.")})},children:(0,a.jsxs)(z.Z,{className:u.group,children:[(0,a.jsx)(ep.L,{className:u.editor,editor:f,onFocus:e=>{g||(p(),e.currentTarget.querySelector("div[contenteditable='true']").blur())},children:(0,a.jsx)(ep.L.Content,{})}),(0,a.jsx)(T.Z,{type:"submit",onClick:e=>{if(!g){p(),e.preventDefault();return}"<p></p>"===f.getHTML()?((0,G.c0)(null,"내용을 입력해 주세요."),e.preventDefault()):(y(f.getHTML()),f.commands.setContent(""))},children:(0,a.jsx)(ex.Z,{className:u.sendIcon,size:m?"1.5rem":"2rem",stroke:1,color:d.colors.gray[7]})})]})})}let e5=(0,o.createContext)({mutateAssetReview:()=>{},mutateAssetReviewMine:()=>{}});function e8(e){let{assetId:t}=e,n=(0,h.a)("(max-width: 765px)"),{classes:o,cx:r}=eh({smallScreen:n}),{user:i,token:s}=(0,M.Z)(),{data:c,mutate:l}=function(e){let{token:t}=(0,M.Z)(),n="".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e,"/review/user"),a=(0,H.ZP)(n,e=>(0,K._)(e,t));return a}(t),{data:d,setSize:m,isLoading:u,mutate:x}=em({assetId:t});return(0,a.jsx)(e5.Provider,{value:{mutateAssetReview:x,mutateAssetReviewMine:l},children:(0,a.jsxs)(C.K,{spacing:"xl",className:o.all,children:[(0,a.jsx)(y.x,{fz:n?28:32,children:"후기"}),(0,a.jsx)(en.Z,{className:o.reviewSection,bg:"white",children:(0,a.jsxs)(C.K,{spacing:"lg",children:[(0,a.jsxs)(z.Z,{className:o.myReviewGroup,children:[(0,a.jsx)(Z.q,{radius:"xl",size:n?30:46,src:"https://avatars.githubusercontent.com/u/52057157?v=4"}),(0,a.jsx)(v.x,{className:o.reviewEditorBox,children:c?null===c.data?(0,a.jsx)(e2,{placeholder:"도움이 되는 착한 후기를 남겨보세요.",assetId:t||""}):(0,a.jsx)(eD,{assetId:t,data:c.data}):(0,a.jsx)(a.Fragment,{})})]}),null==d?void 0:d.map(e=>{var n;return null===(n=e.data.data)||void 0===n?void 0:n.map(e=>e.author.email!==s?(0,a.jsx)(eJ,{assetId:t,data:e}):null)}),u&&(0,a.jsx)(v.x,{className:o.loader,children:(0,a.jsx)(es.a,{variant:"dots"})})]})})]})})}var e3=n(1163),e4=function(e){let{token:t}=(0,M.Z)(),n="".concat("http://ec2-3-112-178-120.ap-northeast-1.compute.amazonaws.com:8000","/asset/").concat(e),a=(0,H.ZP)(n,e=>(0,K._)(e,t));return a};let e7=(0,o.createContext)({mutateAsset:()=>{}}),e6=(0,o.createContext)({ontabClick:()=>{},ontabClickFast:()=>{}});var e9=function(){let e=(0,o.useRef)(null),[t,n]=(0,o.useState)("info"),r=(0,e3.useRouter)(),i=r.query.id?r.query.id.toString():void 0,{data:s,mutate:c}=e4(i);return(0,a.jsx)(e7.Provider,{value:{mutateAsset:c},children:(0,a.jsx)(e6.Provider,{value:{ontabClick:()=>{var t;null===(t=e.current)||void 0===t||t.scrollIntoView({behavior:"smooth",block:"nearest"})},ontabClickFast:()=>{var t;null===(t=e.current)||void 0===t||t.scrollIntoView({behavior:"instant",block:"nearest"})}},children:s&&(0,a.jsxs)(w,{photoSection:(0,a.jsx)(f,{imgUrls:s.data.imgUrls}),summarySection:(0,a.jsx)(Y,{asset:s.data}),anchorSection:(0,a.jsx)("div",{ref:e}),tabSection:(0,a.jsx)($,{activeTab:t,setActiveTab:n}),rightSection:(0,a.jsx)(ei,{asset:s.data}),children:["info"===t&&(0,a.jsx)(ea,{asset:s.data}),"review"===t&&(0,a.jsx)(e8,{assetId:s.data.id})]})})})}},4906:function(e,t,n){"use strict";function a(e){let t=new Date,n=t.getTime()-new Date(e).getTime()-324e5,a=Math.floor(n/1e3),o=Math.floor(a/60),r=Math.floor(o/60),i=Math.floor(r/24),s=Math.floor(i/30);return a<5?"방금 전":a<60?"".concat(a,"초 전"):o<60?"".concat(o,"분 전"):r<24?"".concat(r,"시간 전"):i<30?"".concat(i,"일 전"):s<12?"".concat(s,"달 전"):"".concat(Math.floor(s/12),"년 전")}n.d(t,{n:function(){return a}})}},function(e){e.O(0,[911,436,411,46,873,774,888,179],function(){return e(e.s=3217)}),_N_E=e.O()}]);